{"version":3,"file":"ach-connections.js","mappings":"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","sources":["webpack://simple-secure-stripe/./src/assets/js/frontend/sswps.js","webpack://simple-secure-stripe/webpack/bootstrap","webpack://simple-secure-stripe/webpack/runtime/compat get default export","webpack://simple-secure-stripe/webpack/runtime/define property getters","webpack://simple-secure-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://simple-secure-stripe/external var \"jQuery\"","webpack://simple-secure-stripe/./src/assets/js/frontend/sswps-exports.js","webpack://simple-secure-stripe/./src/assets/js/frontend/ach-connections.js"],"sourcesContent":["/**\n * Make sure we have all of the required sswps top level items.\n *\n * @since 1.0.0\n *\n * @type {Object}\n */\nwindow.sswps = window.sswps || {};\n\n(function (window, $, sswps) {\n\tlet stripe = null;\n\n\tif (typeof sswps_checkout_fields === 'undefined') {\n\t\twindow.sswps_checkout_fields = [];\n\t}\n\n\tsswps.BaseGateway = function (params, container) {\n\t\tthis.params = params;\n\t\tthis.gateway_id = this.params.gateway_id;\n\t\tthis.container = typeof container === 'undefined' ? 'li.payment_method_'.concat(this.gateway_id) : container;\n\n\t\tif (!$(this.container).length) {\n\t\t\tthis.container = '.payment_method_'.concat(this.gateway_id);\n\t\t}\n\n\t\tthis.token_selector = this.params.token_selector;\n\t\tthis.saved_method_selector = this.params.saved_method_selector;\n\t\tthis.payment_token_received = false;\n\t\tthis.stripe = stripe;\n\t\tthis.fields = checkoutFields;\n\n\t\tif ( this.stripe !== null ) {\n\t\t\tthis.elements = this.create_stripe_elements();\n\t\t\tthis.initialize();\n\t\t} else {\n\t\t\tconsole.log( 'Gateways cannot be initialized because Stripe is not initialized.' );\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.create_stripe_elements = function () {\n\t\tlet elementOptions = this.get_element_options();\n\t\telementOptions = $.extend({}, { local: 'auto' }, elementOptions);\n\n\t\treturn this.stripe.elements(elementOptions);\n\t}\n\n\tsswps.BaseGateway.prototype.is_user_logged_in = function () {\n\t\treturn this.params.user_id > 0;\n\t}\n\n\tsswps.BaseGateway.prototype.get_page = function () {\n\t\tvar page = sswps_params_v3.page;\n\t\tif ('cart' === page && $(document.body).is('.woocommerce-checkout')) {\n\t\t\tpage = 'checkout';\n\t\t}\n\t\treturn page;\n\t};\n\n\tsswps.BaseGateway.prototype.set_nonce = function (value) {\n\t\tthis.fields.set(this.gateway_id + '_token_key', value);\n\t\t$(this.token_selector).val(value);\n\t};\n\n\tsswps.BaseGateway.prototype.set_intent = function (value) {\n\t\tthis.fields.set(this.gateway_id + '_payment_intent_key', value);\n\t\t$('#' + this.gateway_id + '_payment_intent_key').val(value);\n\t};\n\n\tsswps.BaseGateway.prototype.get_element_options = function () {\n\t\treturn this.params.elementOptions;\n\t};\n\n\tsswps.BaseGateway.prototype.initialize = function () {\n\t};\n\n\n\tsswps.BaseGateway.prototype.create_button = function () {\n\t};\n\n\tsswps.BaseGateway.prototype.is_gateway_selected = function () {\n\t\treturn $('[name=\"payment_method\"]:checked').val() === this.gateway_id;\n\t};\n\n\tsswps.BaseGateway.prototype.is_saved_method_selected = function () {\n\t\treturn this.is_gateway_selected() && $('[name=\"' + this.gateway_id + '_payment_type_key\"]:checked').val() === 'saved';\n\t};\n\n\tsswps.BaseGateway.prototype.has_checkout_error = function () {\n\t\treturn $('#sswps_checkout_error').length > 0 && this.is_gateway_selected();\n\t};\n\n\tsswps.BaseGateway.prototype.submit_error = function (error, skip_form) {\n\t\tvar message = this.get_error_message(error);\n\n\t\tif (message.indexOf('</ul>') < 0) {\n\t\t\tvar classes = (function () {\n\t\t\t\tvar classes = 'woocommerce-NoticeGroup';\n\t\t\t\tif (this.is_current_page('checkout')) {\n\t\t\t\t\tclasses += ' woocommerce-NoticeGroup-checkout';\n\t\t\t\t}\n\t\t\t\treturn classes;\n\t\t\t}.bind(this)());\n\t\t\tmessage = '<div class=\"' + classes + '\"><ul class=\"woocommerce-error\"><li>' + message + '</li></ul></div>';\n\t\t}\n\t\tvar custom_message = $(document.body).triggerHandler('sswps_submit_error', [message, error, this]);\n\t\tmessage = typeof custom_message === 'undefined' ? message : custom_message;\n\t\tthis.submit_message(message, skip_form);\n\t};\n\n\tsswps.BaseGateway.prototype.submit_error_code = function (code) {\n\t\tconsole.log(code);\n\t};\n\n\tsswps.BaseGateway.prototype.get_error_message = function (message) {\n\t\tif (typeof message == 'object') {\n\t\t\tif (message.hasOwnProperty('message')) {\n\t\t\t\tif (message.message.indexOf('server_side_confirmation_beta=v1') > -1) {\n\t\t\t\t\tmessage.code = 'server_side_confirmation_beta';\n\t\t\t\t} else if (message.message.indexOf('params.payment_method_data.billing_details.phone') > -1) {\n\t\t\t\t\tmessage.code = 'phone_required';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (message.code && sswps_messages[message.code]) {\n\t\t\t\tmessage = sswps_messages[message.code];\n\t\t\t} else {\n\t\t\t\tmessage = message.message;\n\t\t\t}\n\t\t}\n\n\t\treturn message;\n\t};\n\n\tsswps.BaseGateway.prototype.submit_message = function (message, skip_form) {\n\t\t$('.woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message').remove();\n\t\tvar $container = $(this.message_container);\n\n\t\tif (!$container.length || (!skip_form && $container.closest('form').length)) {\n\t\t\tif (!$container.length) {\n\t\t\t\t$container = $(this.container);\n\t\t\t}\n\t\t\t$container = $container.closest('form');\n\t\t}\n\n\t\t$container.prepend(message);\n\t\t$container.removeClass('processing')\n\t\tif ($().unblock) {\n\t\t\t$container.unblock();\n\t\t}\n\t\t$container.find('.input-text, select, input:checkbox').trigger('blur');\n\n\t\tif ($.scroll_to_notices) {\n\t\t\t$.scroll_to_notices($container);\n\t\t} else {\n\t\t\t$('html, body').animate({\n\t\t\t\tscrollTop: $container.offset().top - 100\n\t\t\t}, 1000);\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.get_billing_details = function () {\n\t\tvar prefix = this.get_billing_prefix();\n\t\tvar details = {\n\t\t\tname: this.get_customer_name(prefix),\n\t\t\taddress: {\n\t\t\t\tcity: this.fields.get(prefix + '_city', null),\n\t\t\t\tcountry: this.fields.get(prefix + '_country', null),\n\t\t\t\tline1: this.fields.get(prefix + '_address_1', null),\n\t\t\t\tline2: this.fields.get(prefix + '_address_2', null),\n\t\t\t\tpostal_code: this.fields.get(prefix + '_postcode', null),\n\t\t\t\tstate: this.fields.get(prefix + '_state', null)\n\t\t\t}\n\t\t}\n\t\tif (!details.name || details.name === ' ') {\n\t\t\tdelete details.name;\n\t\t}\n\t\tif (this.fields.get('billing_email') != '') {\n\t\t\tdetails.email = this.fields.get('billing_email');\n\t\t}\n\t\tif (this.fields.get('billing_phone') != '') {\n\t\t\tdetails.phone = this.fields.get('billing_phone');\n\t\t}\n\t\treturn details;\n\t}\n\n\tsswps.BaseGateway.prototype.get_first_name = function (prefix) {\n\t\treturn $('#' + prefix + '_first_name').val();\n\t};\n\n\tsswps.BaseGateway.prototype.get_last_name = function (prefix) {\n\t\treturn $('#' + prefix + '_last_name').val();\n\t};\n\n\tsswps.BaseGateway.prototype.get_shipping_prefix = function () {\n\t\tif (this.needs_shipping() && $('[name=\"ship_to_different_address\"]').length > 0 && $('[name=\"ship_to_different_address\"]').is(':checked')) {\n\t\t\treturn 'shipping';\n\t\t}\n\t\treturn 'billing';\n\t}\n\n\t/**\n\t * Some 3rd party plugins give priority to the shipping address over the billing address\n\t */\n\tsswps.BaseGateway.prototype.get_billing_prefix = function () {\n\t\tvar prefix = 'billing';\n\t\tif ($('[name=\"billing_same_as_shipping\"]').length && $('[name=\"billing_same_as_shipping\"]').is(':checked')) {\n\t\t\tprefix = 'shipping';\n\t\t}\n\t\tif ($('[name=\"bill_to_different_address\"]').length) {\n\t\t\tif ($('[name=\"bill_to_different_address\"]').length > 1) {\n\t\t\t\tif ($('[name=\"bill_to_different_address\"]:checked').val() === 'same_as_shipping') {\n\t\t\t\t\tprefix = 'shipping';\n\t\t\t\t}\n\t\t\t} else if (!$('[name=\"bill_to_different_address\"]').is(':checked')) {\n\t\t\t\tprefix = 'shipping';\n\t\t\t}\n\t\t}\n\t\tvar filtered_prefix = $(document.body).triggerHandler('sswps_get_billing_prefix', [prefix]);\n\t\treturn typeof filtered_prefix === 'undefined' ? prefix : filtered_prefix;\n\t}\n\n\tsswps.BaseGateway.prototype.should_save_method = function () {\n\t\treturn $('#' + this.gateway_id + '_save_source_key').is(':checked');\n\t};\n\n\tsswps.BaseGateway.prototype.is_add_payment_method_page = function () {\n\t\treturn this.get_page() === 'add_payment_method' || $(document.body).hasClass('woocommerce-add-payment-method');\n\t};\n\n\tsswps.BaseGateway.prototype.is_change_payment_method = function () {\n\t\treturn this.get_page() === 'change_payment_method';\n\t};\n\n\tsswps.BaseGateway.prototype.get_selected_payment_method = function () {\n\t\treturn $(this.saved_method_selector).val();\n\t};\n\n\tsswps.BaseGateway.prototype.needs_shipping = function () {\n\t\treturn this.get_gateway_data().needs_shipping;\n\t};\n\n\tsswps.BaseGateway.prototype.get_currency = function () {\n\t\treturn this.get_gateway_data().currency;\n\t};\n\n\tsswps.BaseGateway.prototype.get_gateway_data = function () {\n\t\tvar data = $(this.container).find(\".woocommerce_\".concat(this.gateway_id, \"_gateway_data\")).data('gateway');\n\t\tif (typeof data === 'undefined' && this.is_current_page('checkout')) {\n\t\t\tdata = $('form.checkout').find(\".woocommerce_\".concat(this.gateway_id, \"_gateway_data\")).data('gateway');\n\t\t\tif (typeof data === 'undefined') {\n\t\t\t\tdata = $('.woocommerce_' + this.gateway_id + '_gateway_data').data('gateway');\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t};\n\n\tsswps.BaseGateway.prototype.set_gateway_data = function (data) {\n\t\t$(this.container).find(\".woocommerce_\".concat(this.gateway_id, \"_gateway_data\")).data('gateway', data);\n\t};\n\n\tsswps.BaseGateway.prototype.has_gateway_data = function () {\n\t\tvar data = this.get_gateway_data();\n\t\treturn typeof data !== 'undefined';\n\t}\n\n\tsswps.BaseGateway.prototype.get_customer_name = function (prefix) {\n\t\treturn this.fields.get(prefix + '_first_name') + ' ' + this.fields.get(prefix + '_last_name');\n\t};\n\n\tsswps.BaseGateway.prototype.get_customer_email = function () {\n\t\treturn this.fields.get('billing_email');\n\t};\n\n\tsswps.BaseGateway.prototype.get_address_field_hash = function (prefix) {\n\t\tvar params = ['_first_name', '_last_name', '_address_1', '_address_2', '_postcode', '_city', '_state', '_country'];\n\t\tvar hash = '';\n\n\t\tfor (var i = 0; i < params.length; i++) {\n\t\t\thash += this.fields.get(prefix + params[i]) + '_';\n\t\t}\n\n\t\treturn hash;\n\t};\n\n\tsswps.BaseGateway.prototype.block = function () {\n\t\tif ($().block) {\n\t\t\t$.blockUI({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsswps.BaseGateway.prototype.unblock = function () {\n\t\tif ($().block) {\n\t\t\t$.unblockUI();\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.get_form = function () {\n\t\treturn $(this.token_selector).closest('form');\n\t};\n\n\tsswps.BaseGateway.prototype.get_total_price = function () {\n\t\treturn this.get_gateway_data().total;\n\t};\n\n\tsswps.BaseGateway.prototype.get_total_price_cents = function () {\n\t\treturn this.get_gateway_data().total_cents;\n\t};\n\n\tsswps.BaseGateway.prototype.set_total_price = function (total) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.total = total;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.BaseGateway.prototype.set_total_price_cents = function (total) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.total_cents = total;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.BaseGateway.prototype.set_payment_method = function (payment_method) {\n\t\t$('[name=\"payment_method\"][value=\"' + payment_method + '\"]').prop(\"checked\", true).trigger('click');\n\t};\n\n\tsswps.BaseGateway.prototype.set_selected_shipping_methods = function (shipping_methods) {\n\t\tthis.fields.set('shipping_method', shipping_methods);\n\n\t\tif (shipping_methods && $('[name^=\"shipping_method\"]').length) {\n\t\t\tfor (var i in shipping_methods) {\n\t\t\t\tvar method = shipping_methods[i];\n\t\t\t\t$('[name=\"shipping_method[' + i + ']\"][value=\"' + method + '\"]').prop(\"checked\", true).trigger('change');\n\t\t\t}\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.on_token_received = function (paymentMethod) {\n\t\tthis.payment_token_received = true;\n\t\tthis.set_nonce(paymentMethod.id);\n\t\tthis.process_checkout();\n\t};\n\n\tsswps.BaseGateway.prototype.createPaymentRequest = function () {\n\t\ttry {\n\t\t\tthis.payment_request_options = this.get_payment_request_options();\n\t\t\tthis.paymentRequest = stripe.paymentRequest(this.payment_request_options);\n\t\t\tif (this.payment_request_options.requestShipping) {\n\t\t\t\tthis.paymentRequest.on('shippingaddresschange', this.update_shipping_address.bind(this));\n\t\t\t\tthis.paymentRequest.on('shippingoptionchange', this.update_shipping_method.bind(this));\n\t\t\t}\n\n\t\t\tthis.paymentRequest.on('paymentmethod', this.on_payment_method_received.bind(this));\n\t\t} catch (err) {\n\t\t\tthis.submit_error(err.message);\n\t\t\treturn;\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.get_payment_request_options = function () {\n\t\tvar options = {\n\t\t\tcountry: this.params.country_code,\n\t\t\tcurrency: this.get_currency().toLowerCase(),\n\t\t\ttotal: {\n\t\t\t\tamount: this.get_total_price_cents(),\n\t\t\t\tlabel: this.params.total_label,\n\t\t\t\tpending: true\n\t\t\t},\n\t\t\trequestPayerName: (function () {\n\t\t\t\tif (this.is_current_page('checkout')) {\n\t\t\t\t\t// if billing address is already filled out, then don't request it in wallet\n\t\t\t\t\treturn !this.is_valid_address(this.get_address_object('billing'), 'billing', ['email', 'phone']);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}.bind(this)()),\n\t\t\trequestPayerEmail: this.fields.requestFieldInWallet('billing_email'),\n\t\t\trequestPayerPhone: this.fields.requestFieldInWallet('billing_phone'),\n\t\t\trequestShipping: (function () {\n\t\t\t\tif (this.needs_shipping()) {\n\t\t\t\t\tvar prefix = this.get_shipping_prefix();\n\t\t\t\t\tif ((this.is_current_page('checkout') && !this.is_valid_address(this.get_address_object(prefix), prefix, ['email', 'phone'])) || !this.is_current_page('checkout')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}.bind(this))()\n\t\t};\n\t\tvar displayItems = this.get_display_items(),\n\t\t\tshippingOptions = this.get_shipping_options();\n\n\t\tif (displayItems) {\n\t\t\toptions.displayItems = displayItems;\n\t\t}\n\n\t\tif (options.requestShipping && shippingOptions) {\n\t\t\toptions.shippingOptions = shippingOptions;\n\t\t}\n\n\t\treturn options;\n\t};\n\n\tsswps.BaseGateway.prototype.get_payment_request_update = function (data) {\n\t\tvar options = {\n\t\t\tcurrency: this.get_currency().toLowerCase(),\n\t\t\ttotal: {\n\t\t\t\tamount: parseInt(this.get_total_price_cents()),\n\t\t\t\tlabel: this.params.total_label,\n\t\t\t\tpending: true\n\t\t\t}\n\t\t};\n\t\tvar displayItems = this.get_display_items(),\n\t\t\tshippingOptions = this.get_shipping_options();\n\n\t\tif (displayItems) {\n\t\t\toptions.displayItems = displayItems;\n\t\t}\n\n\t\tif (this.payment_request_options.requestShipping && shippingOptions) {\n\t\t\toptions.shippingOptions = shippingOptions;\n\t\t}\n\n\t\tif (data) {\n\t\t\toptions = $.extend(true, {}, options, data);\n\t\t}\n\n\t\treturn options;\n\t};\n\n\tsswps.BaseGateway.prototype.get_display_items = function () {\n\t\treturn this.get_gateway_data().items;\n\t};\n\n\tsswps.BaseGateway.prototype.set_display_items = function (items) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.items = items;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.BaseGateway.prototype.get_shipping_options = function () {\n\t\treturn this.get_gateway_data().shipping_options;\n\t};\n\n\tsswps.BaseGateway.prototype.set_shipping_options = function (items) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.shipping_options = items;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.BaseGateway.prototype.map_address = function (address) {\n\t\treturn {\n\t\t\tcity: address.city,\n\t\t\tpostcode: address.postalCode,\n\t\t\tstate: address.region,\n\t\t\tcountry: address.country\n\t\t};\n\t};\n\n\tsswps.BaseGateway.prototype.on_payment_method_received = function (paymentResponse) {\n\t\ttry {\n\t\t\tthis.payment_response = paymentResponse;\n\t\t\tthis.populate_checkout_fields(paymentResponse);\n\t\t\tpaymentResponse.complete(\"success\");\n\t\t\tthis.on_token_received(paymentResponse.paymentMethod);\n\t\t} catch (err) {\n\t\t\twindow.alert(err);\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.populate_checkout_fields = function (data) {\n\t\tthis.set_nonce(data.paymentMethod.id);\n\t\tthis.update_addresses(data);\n\t};\n\n\tsswps.BaseGateway.prototype.update_addresses = function (data) {\n\t\tif (data.payerName) {\n\t\t\tthis.fields.set('name', data.payerName, 'billing');\n\t\t}\n\n\t\tif (data.payerEmail) {\n\t\t\tthis.fields.set('email', data.payerEmail, 'billing');\n\t\t}\n\n\t\tif (data.payerPhone) {\n\t\t\tthis.fields.set('phone', data.payerPhone, 'billing');\n\t\t\tif (this.fields.exists('shipping_phone') && this.fields.isEmpty('shipping_phone')) {\n\t\t\t\tthis.fields.set('shipping_phone', data.payerPhone);\n\t\t\t}\n\t\t}\n\n\t\tif (data.shippingAddress) {\n\t\t\tthis.populate_shipping_fields(data.shippingAddress);\n\t\t}\n\n\t\tif (data.paymentMethod.billing_details.address) {\n\t\t\tthis.populate_billing_fields(data.paymentMethod.billing_details.address);\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.populate_address_fields = function (address, prefix) {\n\t\tfor (var k in address) {\n\t\t\tif (null !== address[k]) {\n\t\t\t\tthis.fields.set(k, address[k], prefix);\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.BaseGateway.prototype.populate_billing_fields = function (address) {\n\t\tthis.populate_address_fields(address, 'billing');\n\t}\n\n\tsswps.BaseGateway.prototype.populate_shipping_fields = function (address) {\n\t\tthis.populate_address_fields(address, 'shipping');\n\t}\n\n\tsswps.BaseGateway.prototype.get_address_fields = function () {\n\t\treturn ['first_name', 'last_name', 'country', 'address_1', 'address_2', 'city', 'state', 'postcode', 'phone', 'email'];\n\t}\n\n\tsswps.BaseGateway.prototype.get_address_object = function (prefix) {\n\t\tvar address = {};\n\t\tthis.get_address_fields().forEach(function (k) {\n\t\t\taddress[k] = this.fields.get(k, prefix);\n\t\t}.bind(this));\n\t\treturn address;\n\t}\n\n\tsswps.BaseGateway.prototype.is_current_page = function (page) {\n\t\tif (Array.isArray(page)) {\n\t\t\treturn page.indexOf(this.get_page()) > -1;\n\t\t}\n\t\treturn this.get_page() === page;\n\t}\n\n\tsswps.BaseGateway.prototype.is_valid_address = function (address, prefix, exclude) {\n\t\tif ($.isEmptyObject(address)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar mappings = this.get_address_fields();\n\t\tif (typeof exclude !== 'undefined') {\n\t\t\texclude.forEach(function (k) {\n\t\t\t\tif (mappings.indexOf(k) > -1) {\n\t\t\t\t\tmappings.splice(mappings.indexOf(k), 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tfor (var i = 0; i < mappings.length; i++) {\n\t\t\tvar k = mappings[i];\n\t\t\tvar required = this.fields.required(prefix + '_' + k);\n\t\t\tif (required) {\n\t\t\t\tif (!address[k] || typeof address[k] === 'undefined' || !this.fields.isValid(k, address[k], address)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tsswps.BaseGateway.prototype.ajax_before_send = function (xhr) {\n\t\tif (this.is_user_logged_in()) {\n\t\t\txhr.setRequestHeader('X-WP-Nonce', this.params.rest_nonce);\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.process_checkout = function () {\n\t\treturn new Promise(function () {\n\t\t\tthis.block();\n\t\t\t$.ajax({\n\t\t\t\turl: this.params.routes.checkout,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: $.extend({}, this.serialize_fields(), {\n\t\t\t\t\tpayment_method: this.gateway_id,\n\t\t\t\t\tpage_id: this.get_page(),\n\t\t\t\t\tcurrency: this.get_currency(),\n\t\t\t\t}),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (result) {\n\t\t\t\tif (result.reload) {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.result === 'success') {\n\t\t\t\t\twindow.location = result.redirect;\n\t\t\t\t} else {\n\t\t\t\t\tif (result.messages) {\n\t\t\t\t\t\tthis.submit_error(result.messages);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.unblock();\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n\t\t\t\tthis.unblock();\n\t\t\t\tthis.submit_error(errorThrown);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.BaseGateway.prototype.process_payment = function (order_id, order_key) {\n\t\t$.ajax({\n\t\t\tmethod: 'POST',\n\t\t\turl: this.params.routes.checkout_payment,\n\t\t\tdataType: 'json',\n\t\t\tdata: $.extend({}, this.fields.toJson(), {order_id: order_id, order_key: order_key}),\n\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t}).done(function (result) {\n\t\t\tif (result.result && result.result === 'success') {\n\t\t\t\twindow.location = result.redirect;\n\t\t\t} else {\n\t\t\t\tif (result.reload) {\n\t\t\t\t\treturn window.location.reload();\n\t\t\t\t}\n\t\t\t\tif (result.messages) {\n\t\t\t\t\tthis.payment_token_received = false;\n\t\t\t\t\tthis.submit_error(result.messages);\n\t\t\t\t} else {\n\t\t\t\t\tthis.submit_error(wc_checkout_params.i18n_checkout_error);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this)).fail(function () {\n\n\t\t}.bind(this))\n\t}\n\n\tsswps.BaseGateway.prototype.handle_next_action = function (obj) {\n\t\ttry {\n\t\t\tthis.stripe[this.handleActionMethod](obj.client_secret).then(function (result) {\n\t\t\t\tif (result.error) {\n\t\t\t\t\tthis.unblock();\n\t\t\t\t\tthis.payment_token_received = false;\n\t\t\t\t\treturn this.submit_error(result.error);\n\t\t\t\t}\n\t\t\t\tif (this.is_current_page('order_pay')) {\n\t\t\t\t\tthis.get_form().trigger('submit');\n\t\t\t\t} else {\n\t\t\t\t\tthis.process_payment(obj.order_id, obj.order_key);\n\t\t\t\t}\n\t\t\t}.bind(this)).catch(function (error) {\n\t\t\t\tthis.submit_error(error.message);\n\t\t\t}.bind(this))\n\t\t\treturn false;\n\t\t} catch (err) {\n\n\t\t}\n\t}\n\n\tsswps.BaseGateway.prototype.handle_payment_method_setup = function (obj) {\n\t\ttry {\n\t\t\tthis.stripe[this.setupActionMethod](obj.client_secret).then(function (result) {\n\t\t\t\tif (result.error) {\n\t\t\t\t\tthis.payment_token_received = false;\n\t\t\t\t\treturn this.submit_error(result.error);\n\t\t\t\t}\n\t\t\t\tif (this.is_current_page('order_pay')) {\n\t\t\t\t\tthis.get_form().trigger('submit');\n\t\t\t\t} else {\n\t\t\t\t\tthis.process_payment(obj.order_id, obj.order_key);\n\t\t\t\t}\n\t\t\t}.bind(this)).catch(function (error) {\n\t\t\t\tthis.submit_error(error.message);\n\t\t\t}.bind(this))\n\t\t\treturn false;\n\t\t} catch (err) {\n\n\t\t}\n\t}\n\n\tsswps.BaseGateway.prototype.hashchange = function (e) {\n\t\tvar match = window.location.hash.match(/response=(.*)/);\n\t\tif (match) {\n\t\t\ttry {\n\t\t\t\tvar obj = JSON.parse(window.atob(decodeURIComponent(match[1])));\n\t\t\t\tif (obj && obj.hasOwnProperty('client_secret') && obj.gateway_id === this.gateway_id) {\n\t\t\t\t\thistory.pushState({}, '', window.location.pathname);\n\t\t\t\t\tif (obj.type === 'intent') {\n\t\t\t\t\t\tthis.handle_next_action(obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.handle_payment_method_setup(obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * [sync_payment_intent description]\n\t * @param  {[type]} order_id      [description]\n\t * @param  {[type]} client_secret [description]\n\t * @return {[type]}               [description]\n\t */\n\tsswps.BaseGateway.prototype.sync_payment_intent = function (order_id, client_secret) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t// call intent api\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: this.params.routes.sync_intent,\n\t\t\t\tdata: {order_id: order_id, client_secret: client_secret},\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\treject(response);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(response);\n\t\t\t\t}\n\t\t\t}).fail(function (xhr, textStatus, errorThrown) {\n\t\t\t\tthis.submit_error(errorThrown);\n\t\t\t}.bind(this));\n\t\t}.bind(this))\n\t}\n\n\tsswps.BaseGateway.prototype.create_setup_intent = function () {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t$.ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {payment_method: this.gateway_id},\n\t\t\t\turl: this.params.routes.setup_intent,\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\treject(response.message);\n\t\t\t\t} else {\n\t\t\t\t\tthis.client_secret = response.intent.client_secret;\n\t\t\t\t\tresolve(response);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n\t\t\t\tthis.submit_error(errorThrown);\n\t\t\t}.bind(this));\n\t\t}.bind(this))\n\t}\n\n\tsswps.BaseGateway.prototype.serialize_form = function ($form) {\n\t\tvar formData = $form.find('input').filter(function (i, e) {\n\t\t\t\tif ($(e).is('[name^=\"add-to-cart\"]')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}.bind(this)).serializeArray(),\n\t\t\tdata = {};\n\n\t\tfor (var i in formData) {\n\t\t\tvar obj = formData[i];\n\t\t\tdata[obj.name] = obj.value;\n\t\t}\n\n\t\tdata.payment_method = this.gateway_id;\n\t\treturn data;\n\t};\n\n\tsswps.BaseGateway.prototype.serialize_fields = function () {\n\t\treturn $.extend({}, this.fields.toJson(), $(document.body).triggerHandler('sswps_process_checkout_data', [this, this.fields]));\n\t};\n\n\tsswps.BaseGateway.prototype.map_shipping_methods = function (shippingData) {\n\t\tvar methods = {};\n\n\t\tif (shippingData !== \"default\") {\n\t\t\tvar matches = shippingData.match(/^([\\w+]):(.+)$/);\n\n\t\t\tif (matches.length > 1) {\n\t\t\t\tmethods[matches[1]] = matches[2];\n\t\t\t}\n\t\t}\n\n\t\treturn methods;\n\t};\n\n\tsswps.BaseGateway.prototype.maybe_set_ship_to_different = function () {\n\t\t// if shipping and billing address are different,\n\t\t// set the ship to different address option.\n\t\tif ($('[name=\"ship_to_different_address\"]').length) {\n\t\t\t$('[name=\"ship_to_different_address\"]').prop('checked', this.get_address_field_hash(\"billing\") !== this.get_address_field_hash(\"shipping\")).trigger('change');\n\t\t}\n\t};\n\n\tsswps.BaseGateway.prototype.update_shipping_address = function (ev, data) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t$.ajax({\n\t\t\t\turl: this.params.routes.shipping_address,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: $.extend({}, {\n\t\t\t\t\taddress: this.map_address(ev.shippingAddress),\n\t\t\t\t\tpayment_method: this.gateway_id,\n\t\t\t\t\tpage_id: this.get_page(),\n\t\t\t\t\tcurrency: this.get_currency()\n\t\t\t\t}, data),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\tev.updateWith(response.data.newData);\n\t\t\t\t\treject(response.data);\n\t\t\t\t} else {\n\t\t\t\t\tev.updateWith(response.data.newData);\n\t\t\t\t\tthis.fields.set('shipping_method', response.data.shipping_method);\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function () {\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.BaseGateway.prototype.update_shipping_method = function (ev, data) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t$.ajax({\n\t\t\t\turl: this.params.routes.shipping_method,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: $.extend({}, {\n\t\t\t\t\tshipping_method: ev.shippingOption.id,\n\t\t\t\t\tpayment_method: this.gateway_id,\n\t\t\t\t\tcurrency: this.get_currency(),\n\t\t\t\t\tpage_id: this.get_page()\n\t\t\t\t}, data),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\tev.updateWith(response.data.newData);\n\t\t\t\t\treject(response.data);\n\t\t\t\t} else {\n\t\t\t\t\tthis.set_selected_shipping_methods(response.data.shipping_methods);\n\t\t\t\t\tev.updateWith(response.data.newData);\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n\t\t\t\tthis.submit_error(errorThrown);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\t/********** Checkout Gateway ********/\n\n\tsswps.CheckoutGateway = function () {\n\t\tthis.message_container = 'li.payment_method_' + this.gateway_id;\n\t\tthis.banner_container = 'li.banner_payment_method_' + this.gateway_id;\n\t\t$(document.body).on('update_checkout', this.update_checkout.bind(this));\n\t\t$(document.body).on('updated_checkout', this.updated_checkout.bind(this));\n\t\t$(document.body).on('updated_checkout', this.container_styles.bind(this));\n\t\t$(document.body).on('checkout_error', this.checkout_error.bind(this));\n\t\t$(this.token_selector).closest('form').on('checkout_place_order_' + this.gateway_id, this.checkout_place_order.bind(this)); // events for showing gateway payment buttons\n\n\t\t$(document.body).on('sswps_new_method_' + this.gateway_id, this.on_show_new_methods.bind(this));\n\t\t$(document.body).on('sswps_saved_method_' + this.gateway_id, this.on_show_saved_methods.bind(this));\n\t\t$(document.body).on('sswps_payment_method_selected', this.on_payment_method_selected.bind(this));\n\n\t\tif (this.banner_enabled()) {\n\t\t\tif ($('.woocommerce-billing-fields').length) {\n\t\t\t\t$('.sswps-banner-checkout').css('max-width', $('.woocommerce-billing-fields').outerWidth(true));\n\t\t\t}\n\t\t}\n\n\t\tthis.container_styles();\n\n\t\tthis.hasOrderReviewParams();\n\t};\n\n\tsswps.CheckoutGateway.prototype.container_styles = function () {\n\t\tif (!this.params.description) {\n\t\t\t$(this.container).addClass('sswps-no-desc');\n\t\t}\n\t\tif (!$(this.container).find('.sswps-saved-methods').length) {\n\t\t\t$(this.container).find('.payment_box').addClass('sswps-no-methods');\n\t\t}\n\t}\n\n\tsswps.CheckoutGateway.prototype.hasOrderReviewParams = function () {\n\t\tvar params = window.location.search;\n\t\tvar match = params.match(/_stripe_order_review=(.+)/);\n\n\t\tif (match && match.length > 1) {\n\t\t\ttry {\n\t\t\t\tvar obj = JSON.parse(window.atob(decodeURIComponent(match[1])));\n\t\t\t\tif (this.gateway_id === obj.payment_method) {\n\t\t\t\t\t$(function () {\n\t\t\t\t\t\tthis.payment_token_received = true;\n\t\t\t\t\t\tthis.set_nonce(obj.payment_nonce);\n\t\t\t\t\t\tthis.set_use_new_option(true);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\thistory.pushState({}, '', window.location.pathname);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.has3DSecureParams = function () {\n\t\tif (this.is_current_page('order_pay') || this.is_current_page('checkout') || this.is_change_payment_method()) {\n\t\t\tif (window.location.hash && typeof window.location.hash === 'string') {\n\t\t\t\tvar match = window.location.hash.match(/response=(.*)/);\n\t\t\t\tif (match) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar obj = JSON.parse(window.atob(decodeURIComponent(match[1])));\n\t\t\t\t\t\tif (obj && obj.hasOwnProperty('client_secret') && obj.gateway_id === this.gateway_id) {\n\t\t\t\t\t\t\t$(function () {\n\t\t\t\t\t\t\t\tthis.set_payment_method(this.gateway_id);\n\t\t\t\t\t\t\t\tthis.set_use_new_option(true);\n\t\t\t\t\t\t\t\tthis.set_nonce(obj.pm);\n\t\t\t\t\t\t\t\tif (obj.save_method === true) {\n\t\t\t\t\t\t\t\t\tthis.set_save_payment_method(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$('[name=\"terms\"]').prop('checked', true);\n\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t\thistory.pushState({}, '', window.location.pathname + window.location.search);\n\t\t\t\t\t\t\tthis.handle_next_action(obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.CheckoutGateway.prototype.update_shipping_address = function () {\n\t\treturn sswps.BaseGateway.prototype.update_shipping_address.apply(this, arguments).then(function (data) {\n\t\t\t// populate the checkout fields with the address\n\t\t\tthis.populate_address_fields(data.address, this.get_shipping_prefix());\n\t\t\tthis.fields.toFormFields({update_shipping_method: false});\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Called on the WC updated_checkout event\n\t */\n\tsswps.CheckoutGateway.prototype.updated_checkout = function () {\n\t};\n\n\t/**\n\t * Called on the WC update_checkout event\n\t */\n\tsswps.CheckoutGateway.prototype.update_checkout = function () {\n\t};\n\t/**\n\t * Called on the WC checkout_error event\n\t */\n\n\n\tsswps.CheckoutGateway.prototype.checkout_error = function () {\n\t\tif (this.has_checkout_error()) {\n\t\t\tthis.payment_token_received = false;\n\t\t\tthis.payment_response = null;\n\t\t\tthis.show_payment_button();\n\t\t\tthis.hide_place_order();\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.is_valid_checkout = function () {\n\t\tif ($('[name=\"terms\"]').length && $('[name=\"terms\"]').is(':visible')) {\n\t\t\tif (!$('[name=\"terms\"]').is(':checked')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tsswps.CheckoutGateway.prototype.get_payment_method = function () {\n\t\treturn $('[name=\"payment_method\"]:checked').val();\n\t};\n\n\tsswps.CheckoutGateway.prototype.set_use_new_option = function (bool) {\n\t\t$('#' + this.gateway_id + '_use_new').prop('checked', bool).trigger('change');\n\t};\n\n\tsswps.CheckoutGateway.prototype.checkout_place_order = function () {\n\t\tif (!this.is_valid_checkout()) {\n\t\t\tthis.submit_error(this.params.messages.terms);\n\t\t\treturn false;\n\t\t} else if (this.is_saved_method_selected()) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.payment_token_received;\n\t};\n\n\tsswps.CheckoutGateway.prototype.on_token_received = function (paymentMethod) {\n\t\tthis.payment_token_received = true;\n\t\tthis.set_nonce(paymentMethod.id);\n\t\tthis.hide_payment_button();\n\t\tthis.show_place_order();\n\t};\n\n\tsswps.CheckoutGateway.prototype.block = function () {\n\t\tif ($().block) {\n\t\t\tthis.get_form().block({\n\t\t\t\tmessage: null,\n\t\t\t\toverlayCSS: {\n\t\t\t\t\tbackground: '#fff',\n\t\t\t\t\topacity: 0.6\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t};\n\n\tsswps.CheckoutGateway.prototype.unblock = function () {\n\t\tif ($().block) {\n\t\t\tthis.get_form().unblock();\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.hide_place_order = function () {\n\t\t$('#place_order').addClass('sswps-hide');\n\t};\n\n\tsswps.CheckoutGateway.prototype.show_place_order = function () {\n\t\t$('#place_order').removeClass('sswps-hide');\n\t};\n\n\tsswps.CheckoutGateway.prototype.on_show_new_methods = function () {\n\t\tif (this.payment_token_received) {\n\t\t\tthis.show_place_order();\n\t\t\tthis.hide_payment_button();\n\t\t} else {\n\t\t\tthis.hide_place_order();\n\t\t\tthis.show_payment_button();\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.on_show_saved_methods = function () {\n\t\tthis.hide_payment_button();\n\t\tthis.show_place_order();\n\t};\n\n\tsswps.CheckoutGateway.prototype.show_payment_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.$button.show();\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.hide_payment_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.$button.hide();\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.trigger_payment_method_selected = function () {\n\t\tthis.on_payment_method_selected(null, $('[name=\"payment_method\"]:checked').val());\n\t};\n\n\tsswps.CheckoutGateway.prototype.show_new_payment_method = function () {\n\t\t$('[name=\"' + this.gateway_id + '_payment_type_key\"][value=\"new\"').trigger('click');\n\t}\n\n\tsswps.CheckoutGateway.prototype.on_payment_method_selected = function (e, payment_method) {\n\t\tif (payment_method === this.gateway_id) {\n\t\t\tif (this.payment_token_received || this.is_saved_method_selected()) {\n\t\t\t\tthis.hide_payment_button();\n\t\t\t\tthis.show_place_order();\n\t\t\t} else {\n\t\t\t\tthis.show_payment_button();\n\t\t\t\tthis.hide_place_order();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hide_payment_button();\n\n\t\t\tif (payment_method && payment_method.indexOf('sswps_') < 0) {\n\t\t\t\tthis.show_place_order();\n\t\t\t}\n\t\t}\n\t};\n\n\tsswps.CheckoutGateway.prototype.banner_enabled = function () {\n\t\treturn this.params.banner_enabled === '1';\n\t};\n\n\tsswps.CheckoutGateway.prototype.checkout_fields_valid = function () {\n\t\tif (['checkout', 'order_pay'].indexOf(this.get_page()) < 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar valid = true;\n\n\t\tif (!(valid = this.fields.validateFields('billing'))) {\n\t\t\tthis.submit_error(this.params.messages.required_field);\n\t\t} else if (this.needs_shipping() && $('#ship-to-different-address-checkbox').is(':checked')) {\n\t\t\tif (!(valid = this.fields.validateFields('shipping'))) {\n\t\t\t\tthis.submit_error(this.params.messages.required_field);\n\t\t\t}\n\t\t} else if (!(valid = this.is_valid_checkout())) {\n\t\t\tthis.submit_error(this.params.messages.terms);\n\t\t}\n\n\t\treturn valid;\n\t};\n\n\tsswps.CheckoutGateway.prototype.cart_contains_subscription = function () {\n\t\treturn typeof sswps_cart_contains_subscription !== 'undefined' && sswps_cart_contains_subscription === true;\n\t}\n\n\tsswps.CheckoutGateway.prototype.set_save_payment_method = function (bool) {\n\t\t$('[name=\"' + this.gateway_id + '_save_source_key' + '\"]').prop('checked', bool);\n\t}\n\n\tsswps.CheckoutGateway.prototype.process_order_pay = function () {\n\t\tvar data = this.get_form().serializeArray();\n\t\tdata.push({name: '_wpnonce', value: this.params.rest_nonce});\n\t\tdata.push({name: 'order_id', value: this.params.order_id});\n\t\tdata.push({name: 'order_key', value: this.params.order_key});\n\t\tthis.block();\n\t\t$.ajax({\n\t\t\turl: this.params.routes.order_pay,\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tdata: $.param(data)\n\t\t}).done(function (response) {\n\t\t\tif (response.success) {\n\t\t\t\tif (response.needs_confirmation) {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tthis.handle_next_action(response.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location.href = response.redirect;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.get_form().trigger('submit');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.submit_error(response.message);\n\t\t\t}\n\t\t}.bind(this)).fail(function (jqXHR, textStatus, errorThrown) {\n\t\t\tthis.unblock();\n\t\t\tthis.submit_error(errorThrown);\n\t\t}.bind(this))\n\t}\n\n\tsswps.CheckoutGateway.prototype.handle_create_account_change = function () {\n\t\tif ($('#createaccount').length) {\n\t\t\tif ($('#createaccount').is(':checked') && !this.linkPaymentEnabled) {\n\t\t\t\tthis.show_save_card();\n\t\t\t} else {\n\t\t\t\tthis.hide_save_card();\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.CheckoutGateway.prototype.hide_save_card = function () {\n\t\t$(this.container).find('.wc-stripe-save-source').hide();\n\t}\n\n\tsswps.CheckoutGateway.prototype.show_save_card = function () {\n\t\t$(this.container).find('.wc-stripe-save-source').show();\n\t}\n\n\t/************** Product Gateway ***************/\n\n\tsswps.ProductGateway = function () {\n\t\tthis.message_container = 'div.product'; // events\n\n\t\t$('form.cart').on('found_variation', this.found_variation.bind(this));\n\t\t$('form.cart').on('reset_data', this.reset_variation_data.bind(this));\n\t\tthis.buttonWidth = $('form.cart div.quantity').outerWidth(true) + $('.single_add_to_cart_button').outerWidth();\n\t\tvar marginLeft = $('.single_add_to_cart_button').css('marginLeft');\n\n\t\tif (marginLeft) {\n\t\t\tthis.buttonWidth += parseInt(marginLeft.replace('px', ''));\n\t\t}\n\n\t\t$(this.container).css('max-width', this.buttonWidth + 'px');\n\t};\n\n\tsswps.ProductGateway.prototype.update_shipping_address = function (ev) {\n\t\treturn sswps.BaseGateway.prototype.update_shipping_address.call(this, ev, this.get_add_to_cart_data());\n\t}\n\n\tsswps.ProductGateway.prototype.update_shipping_method = function (ev) {\n\t\treturn sswps.BaseGateway.prototype.update_shipping_method.call(this, ev, this.get_add_to_cart_data());\n\t}\n\n\tsswps.ProductGateway.prototype.get_quantity = function () {\n\t\treturn parseInt($('[name=\"quantity\"]').val());\n\t};\n\n\tsswps.ProductGateway.prototype.set_rest_nonce = function (e, nonce) {\n\t\tthis.params.rest_nonce = nonce;\n\t};\n\n\tsswps.ProductGateway.prototype.found_variation = function (e, variation) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.product.price = variation.display_price;\n\t\tdata.product.price_cents = variation.display_price_cents;\n\t\tdata.needs_shipping = !variation.is_virtual;\n\t\tdata.product.variation = variation;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.ProductGateway.prototype.reset_variation_data = function () {\n\t\tvar data = this.get_product_data();\n\t\tdata.variation = false;\n\t\tthis.set_product_data(data);\n\t\tthis.disable_payment_button();\n\t};\n\n\tsswps.ProductGateway.prototype.disable_payment_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.get_button().prop('disabled', true).addClass('disabled');\n\t\t}\n\t};\n\n\tsswps.ProductGateway.prototype.enable_payment_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.get_button().prop('disabled', false).removeClass('disabled');\n\t\t}\n\t};\n\n\tsswps.ProductGateway.prototype.get_button = function () {\n\t\treturn this.$button;\n\t};\n\n\tsswps.ProductGateway.prototype.is_variable_product = function () {\n\t\tvar variation = this.get_product_data().variation;\n\t\treturn !!variation || $('[name=\"variation_id\"]').length > 0;\n\t};\n\n\tsswps.ProductGateway.prototype.variable_product_selected = function () {\n\t\tvar variation = this.get_product_data().variation\n\t\tvar val = $('input[name=\"variation_id\"]').val();\n\t\treturn !!variation || (!!val && \"0\" != val);\n\t};\n\n\tsswps.ProductGateway.prototype.get_product_data = function () {\n\t\treturn this.get_gateway_data().product;\n\t};\n\n\tsswps.ProductGateway.prototype.set_product_data = function (product) {\n\t\tvar data = this.get_gateway_data();\n\t\tdata.product = product;\n\t\tthis.set_gateway_data(data);\n\t};\n\n\tsswps.ProductGateway.prototype.get_form = function () {\n\t\treturn $(this.container).closest('form');\n\t}\n\n\tsswps.ProductGateway.prototype.get_add_to_cart_data = function () {\n\t\treturn {\n\t\t\tproduct_id: this.get_product_data().id,\n\t\t\tvariation_id: this.is_variable_product() ? $('[name=\"variation_id\"]').val() : 0,\n\t\t\tqty: $('[name=\"quantity\"]').val(),\n\t\t\tpayment_method: this.gateway_id,\n\t\t\tcurrency: this.get_currency(),\n\t\t\tpage_id: this.get_page()\n\t\t}\n\t}\n\n\tsswps.ProductGateway.prototype.add_to_cart = function () {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tthis.block();\n\t\t\tvar data = this.get_add_to_cart_data();\n\t\t\tvar fields = this.get_form().find(':not([name=\"add-to-cart\"],[name=\"quantity\"],[name^=\"attribute_\"],[name=\"variation_id\"])').serializeArray();\n\t\t\tif (fields) {\n\t\t\t\tfor (var i in fields) {\n\t\t\t\t\tdata[fields[i].name] = fields[i].value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$.ajax({\n\t\t\t\turl: this.params.routes.add_to_cart,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: $.extend({}, data, this.get_product_variations()),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tthis.unblock();\n\n\t\t\t\tif (response.code) {\n\t\t\t\t\tthis.submit_error(response.message);\n\t\t\t\t\treject(response);\n\t\t\t\t} else {\n\t\t\t\t\tthis.set_total_price(response.data.total);\n\t\t\t\t\tthis.set_total_price_cents(response.data.totalCents);\n\t\t\t\t\tthis.set_display_items(response.data.displayItems);\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function (xhr, textStatus, errorThrown) {\n\t\t\t\tthis.unblock();\n\t\t\t\tthis.submit_error(errorThrown);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.ProductGateway.prototype.cart_calculation = function () {\n\t\tif (sswps.processing_calculation) {\n\t\t\treturn sswps.processing_calculation;\n\t\t}\n\t\tsswps.processing_calculation = new Promise(function (resolve, reject) {\n\t\t\tvar variation = this.get_product_data().variation;\n\t\t\t$.ajax({\n\t\t\t\turl: this.params.routes.cart_calculation,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: $.extend({}, this.get_add_to_cart_data(), this.get_product_variations(), {\n\t\t\t\t\tvariation_id: variation.variation_id\n\t\t\t\t}),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t}).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\treject(response);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function () {\n\t\t\t\treject();\n\t\t\t})\n\t\t}.bind(this)).finally(function () {\n\t\t\tsswps.processing_calculation = false;\n\t\t}.bind(this));\n\t\treturn sswps.processing_calculation;\n\t};\n\n\tsswps.ProductGateway.prototype.update_from_cart_calculation = function (data) {\n\t\tif (data && data[this.gateway_id]) {\n\t\t\tthis.set_total_price(data[this.gateway_id].total);\n\t\t\tthis.set_total_price_cents(data[this.gateway_id].totalCents);\n\t\t\tthis.set_display_items(data[this.gateway_id].displayItems);\n\t\t}\n\t}\n\n\tsswps.ProductGateway.prototype.get_product_variations = function () {\n\t\tvar variations = {};\n\t\tif (this.is_variable_product()) {\n\t\t\t$('.variations [name^=\"attribute_\"]').each(function (index, el) {\n\t\t\t\tvar $el = $(el);\n\t\t\t\tvar name = $el.data('attribute_name') || $el.attr('name');\n\t\t\t\tvariations[name] = $el.val();\n\t\t\t});\n\t\t}\n\t\treturn variations;\n\t}\n\n\t/************* Cart Gateway *************/\n\n\tsswps.CartGateway = function () {\n\t\tthis.message_container = 'div.woocommerce';\n\n\t\t$(document.body).on('updated_wc_div', this.updated_html.bind(this));\n\t\t$(document.body).on('updated_cart_totals', this.updated_html.bind(this));\n\t\t$(document.body).on('wc_cart_emptied', this.cart_emptied.bind(this));\n\t};\n\n\tsswps.CartGateway.prototype.submit_error = function (message) {\n\t\tthis.submit_message(this.get_error_message(message));\n\t};\n\n\tsswps.CartGateway.prototype.updated_html = function (e) {\n\t};\n\n\tsswps.CartGateway.prototype.cart_emptied = function (e) {\n\t};\n\n\tsswps.CartGateway.prototype.add_cart_totals_class = function () {\n\t\t$('.cart_totals').addClass('stripe_cart_gateway_active');\n\t};\n\n\t/************* Google Pay Mixins **************/\n\n\tsswps.GooglePay = function () {\n\t};\n\n\tsswps.GooglePay.prototype.handleActionMethod = 'handleCardAction';\n\tsswps.GooglePay.prototype.setupActionMethod = 'confirmCardSetup';\n\n\tvar googlePayBaseRequest = {\n\t\tapiVersion: 2,\n\t\tapiVersionMinor: 0\n\t};\n\n\tvar baseCardPaymentMethod = {\n\t\ttype: 'CARD',\n\t\tparameters: {\n\t\t\tallowedAuthMethods: [\"PAN_ONLY\"],\n\t\t\tallowedCardNetworks: [\"AMEX\", \"DISCOVER\", \"INTERAC\", \"JCB\", \"MASTERCARD\", \"VISA\"],\n\t\t\tassuranceDetailsRequired: true\n\t\t}\n\t};\n\n\t/**\n\t * Populate the WC checkout fields.\n\t * @param  {[type]}\n\t * @return {[type]}\n\t */\n\tsswps.GooglePay.prototype.update_addresses = function (paymentData) {\n\t\tif (paymentData.paymentMethodData.info.billingAddress) {\n\t\t\tvar billing_address = paymentData.paymentMethodData.info.billingAddress;\n\t\t\tif (this.is_current_page('checkout') && this.is_valid_address(this.billing_address_object, 'billing', ['phone', 'email'])) {\n\t\t\t\tbilling_address = {phoneNumber: billing_address.phoneNumber};\n\t\t\t}\n\t\t\tthis.populate_billing_fields(billing_address);\n\t\t\tif (billing_address.phoneNumber && this.fields.exists('shipping_phone') && this.fields.isEmpty('shipping_phone')) {\n\t\t\t\tthis.fields.set('shipping_phone', billing_address.phoneNumber);\n\t\t\t}\n\t\t}\n\n\t\tif (paymentData.shippingAddress) {\n\t\t\tthis.populate_shipping_fields(paymentData.shippingAddress);\n\t\t}\n\n\t\tif (paymentData.email) {\n\t\t\tthis.fields.set('email', paymentData.email, 'billing');\n\t\t}\n\t};\n\n\tsswps.GooglePay.prototype.map_address = function (address) {\n\t\treturn {\n\t\t\tcity: address.locality,\n\t\t\tpostcode: address.postalCode,\n\t\t\tstate: address.administrativeArea,\n\t\t\tcountry: address.countryCode\n\t\t};\n\t};\n\n\tsswps.GooglePay.prototype.update_payment_data = function (data, extraData) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar shipping_method = data.shippingOptionData.id == 'default' ? null : data.shippingOptionData.id;\n\t\t\t$.when($.ajax({\n\t\t\t\turl: this.params.routes.payment_data,\n\t\t\t\tdataType: 'json',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: $.extend({}, {\n\t\t\t\t\taddress: this.map_address(data.shippingAddress),\n\t\t\t\t\tshipping_method: shipping_method,\n\t\t\t\t\tpage_id: this.get_page(),\n\t\t\t\t\tcurrency: this.get_currency()\n\t\t\t\t}, extraData),\n\t\t\t\tbeforeSend: this.ajax_before_send.bind(this)\n\t\t\t})).done(function (response) {\n\t\t\t\tif (response.code) {\n\t\t\t\t\treject(response.data.data);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t}\n\t\t\t}.bind(this)).fail(function () {\n\t\t\t\treject();\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.GooglePay.prototype.on_payment_data_changed = function (data) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tthis.update_payment_data(data).then(function (response) {\n\t\t\t\tresolve(response.paymentRequestUpdate);\n\t\t\t\tthis.set_selected_shipping_methods(response.shipping_methods);\n\t\t\t\tthis.payment_data_updated(response, address);\n\t\t\t}.bind(this))['catch'](function (data) {\n\t\t\t\tresolve(data);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.GooglePay.prototype.payment_data_updated = function (response) {\n\t};\n\n\tsswps.GooglePay.prototype.get_merchant_info = function () {\n\t\tvar options = {\n\t\t\tmerchantId: this.params.merchant_id,\n\t\t\tmerchantName: this.params.merchant_name\n\t\t};\n\n\t\tif (this.params.environment === 'TEST') {\n\t\t\tdelete options.merchantId;\n\t\t}\n\n\t\treturn options;\n\t};\n\n\tsswps.GooglePay.prototype.get_payment_options = function () {\n\t\tvar options = {\n\t\t\tenvironment: this.params.environment,\n\t\t\tmerchantInfo: this.get_merchant_info(),\n\t\t\tpaymentDataCallbacks: {\n\t\t\t\tonPaymentAuthorized: function onPaymentAuthorized() {\n\t\t\t\t\treturn new Promise(function (resolve) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttransactionState: \"SUCCESS\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (this.needs_shipping()) {\n\t\t\tvar prefix = this.get_shipping_prefix();\n\t\t\tif ((this.is_current_page('checkout') && !this.is_valid_address(this.get_address_object(prefix), prefix, ['email', 'phone'])) || !this.is_current_page('checkout')) {\n\t\t\t\toptions.paymentDataCallbacks.onPaymentDataChanged = this.on_payment_data_changed.bind(this);\n\t\t\t}\n\t\t}\n\n\t\treturn options;\n\t};\n\n\tsswps.GooglePay.prototype.build_payment_request = function () {\n\t\tvar request = $.extend({}, googlePayBaseRequest, {\n\t\t\temailRequired: this.fields.requestFieldInWallet('billing_email'),\n\t\t\tmerchantInfo: this.get_merchant_info(),\n\t\t\tallowedPaymentMethods: [$.extend({\n\t\t\t\ttype: \"CARD\",\n\t\t\t\ttokenizationSpecification: {\n\t\t\t\t\ttype: \"PAYMENT_GATEWAY\",\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\tgateway: 'stripe',\n\t\t\t\t\t\t\"stripe:version\": \"2018-10-31\",\n\t\t\t\t\t\t\"stripe:publishableKey\": this.params.api_key\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, baseCardPaymentMethod)],\n\t\t\tshippingAddressRequired: (function () {\n\t\t\t\tif (this.needs_shipping()) {\n\t\t\t\t\tvar prefix = this.get_shipping_prefix();\n\t\t\t\t\tif ((this.is_current_page('checkout') && !this.is_valid_address(this.get_address_object(prefix), prefix, ['email', 'phone'])) || !this.is_current_page('checkout')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}.bind(this))(),\n\t\t\ttransactionInfo: {\n\t\t\t\tcountryCode: this.params.processing_country,\n\t\t\t\tcurrencyCode: this.get_currency(),\n\t\t\t\ttotalPriceStatus: \"ESTIMATED\",\n\t\t\t\ttotalPrice: this.get_total_price().toString(),\n\t\t\t\tdisplayItems: this.get_display_items(),\n\t\t\t\ttotalPriceLabel: this.params.total_price_label\n\t\t\t}\n\t\t});\n\t\trequest.allowedPaymentMethods[0].parameters.billingAddressRequired = (function () {\n\t\t\tif (this.is_current_page('checkout')) {\n\t\t\t\tvar address = this.billing_address_object = this.get_address_object('billing');\n\t\t\t\t// phone is in address object, so if phone is required and empty, request address. If address is not filled out, then request it.\n\t\t\t\tif (this.fields.requestFieldInWallet('billing_phone') || !this.is_valid_address(address, 'billing', ['email'])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}.bind(this)());\n\t\tif (request.allowedPaymentMethods[0].parameters.billingAddressRequired) {\n\t\t\trequest.allowedPaymentMethods[0].parameters.billingAddressParameters = {\n\t\t\t\tformat: \"FULL\",\n\t\t\t\tphoneNumberRequired: this.fields.requestFieldInWallet('billing_phone')\n\t\t\t};\n\t\t}\n\n\t\tif (request.shippingAddressRequired) {\n\t\t\trequest.shippingAddressParameters = {};\n\t\t\trequest.shippingOptionRequired = true;\n\t\t\trequest.shippingOptionParameters = {\n\t\t\t\tshippingOptions: this.get_shipping_options()\n\t\t\t};\n\t\t\trequest.callbackIntents = [\"SHIPPING_ADDRESS\", \"SHIPPING_OPTION\", \"PAYMENT_AUTHORIZATION\"];\n\t\t} else {\n\t\t\trequest.callbackIntents = [\"PAYMENT_AUTHORIZATION\"];\n\t\t}\n\t\tthis.payment_request_options = request;\n\t\treturn request;\n\t};\n\n\tsswps.GooglePay.prototype.createPaymentsClient = function () {\n\t\tthis.paymentsClient = new google.payments.api.PaymentsClient(this.get_payment_options());\n\t};\n\n\tsswps.GooglePay.prototype.isReadyToPay = function () {\n\t\treturn new Promise(function (resolve) {\n\t\t\tvar isReadyToPayRequest = $.extend({}, googlePayBaseRequest);\n\t\t\tisReadyToPayRequest.allowedPaymentMethods = [baseCardPaymentMethod];\n\t\t\tthis.paymentsClient.isReadyToPay(isReadyToPayRequest).then(function () {\n\t\t\t\tthis.can_pay = true;\n\t\t\t\tthis.create_button();\n\t\t\t\tresolve();\n\t\t\t}.bind(this))[\"catch\"](function (err) {\n\t\t\t\tif (err && err.message && err.message.indexOf('ShadowRoot') > -1) {\n\t\t\t\t\tconsole.log('GPay is not supported on this browser.');\n\t\t\t\t} else {\n\t\t\t\t\tthis.submit_error(err);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.GooglePay.prototype.create_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.$button.remove();\n\t\t}\n\n\t\tthis.$button = $(this.paymentsClient.createButton(this.get_button_options()));\n\t\tthis.$button.addClass('gpay-button-container');\n\t};\n\n\tsswps.GooglePay.prototype.is_rectangle_button = function () {\n\t\treturn this.params.button_shape === 'rect';\n\t}\n\n\tsswps.GooglePay.prototype.get_button_options = function () {\n\t\tvar options = {\n\t\t\tonClick: this.start.bind(this),\n\t\t\tbuttonColor: this.params.button_color,\n\t\t\tbuttonType: this.params.button_style,\n\t\t\tbuttonSizeMode: this.params.button_size_mode\n\t\t};\n\t\tif (this.params.button_locale !== null) {\n\t\t\toptions.buttonLocale = this.params.button_locale;\n\t\t}\n\t\treturn options;\n\t}\n\n\tsswps.GooglePay.prototype.start = function () {\n\t\t// always recreate the paymentClient to ensure latest data is used.\n\t\tthis.createPaymentsClient();\n\t\tthis.paymentsClient.loadPaymentData(this.build_payment_request()).then(function (paymentData) {\n\t\t\tvar data = JSON.parse(paymentData.paymentMethodData.tokenizationData.token);\n\t\t\tthis.update_addresses(paymentData);\n\t\t\t// convert token to payment method\n\t\t\tthis.stripe.createPaymentMethod({\n\t\t\t\ttype: 'card',\n\t\t\t\tcard: {token: data.id},\n\t\t\t\tbilling_details: this.get_billing_details()\n\t\t\t}).then(function (result) {\n\t\t\t\tif (result.error) {\n\t\t\t\t\treturn this.submit_error(result.error);\n\t\t\t\t}\n\t\t\t\tthis.on_token_received(result.paymentMethod);\n\t\t\t}.bind(this));\n\t\t}.bind(this))[\"catch\"](function (err) {\n\t\t\tif (err.statusCode === \"CANCELED\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (err.statusMessage && err.statusMessage.indexOf(\"paymentDataRequest.callbackIntent\") > -1) {\n\t\t\t\tthis.submit_error_code(\"DEVELOPER_ERROR_WHITELIST\");\n\t\t\t} else {\n\t\t\t\tthis.submit_error(err.statusMessage);\n\t\t\t}\n\t\t}.bind(this));\n\t};\n\n\tsswps.ApplePay = function () {\n\t};\n\n\tsswps.ApplePay.prototype.handleActionMethod = 'handleCardAction';\n\tsswps.ApplePay.prototype.setupActionMethod = 'confirmCardSetup';\n\n\tsswps.ApplePay.prototype.initialize = function () {\n\t\tthis.createPaymentRequest();\n\t\tthis.canMakePayment();\n\t};\n\n\tsswps.ApplePay.prototype.get_payment_request_options = function () {\n\t\treturn $.extend({}, sswps.BaseGateway.prototype.get_payment_request_options.apply(this, arguments), {\n\t\t\tdisableWallets: ['googlePay']\n\t\t});\n\t}\n\n\tsswps.ApplePay.prototype.create_button = function () {\n\t\tif (this.$button) {\n\t\t\tthis.$button.remove();\n\t\t}\n\n\t\tthis.$button = $(this.params.button);\n\t\tthis.$button.on('click', this.start.bind(this));\n\t\tthis.append_button();\n\t};\n\n\tsswps.ApplePay.prototype.canMakePayment = function () {\n\t\treturn new Promise(function (resolve) {\n\t\t\tthis.paymentRequest.canMakePayment().then(function (result) {\n\t\t\t\tif (result && result.applePay) {\n\t\t\t\t\tthis.can_pay = true;\n\t\t\t\t\tthis.create_button();\n\t\t\t\t\t$(this.container).show();\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.ApplePay.prototype.start = function (e) {\n\t\te.preventDefault();\n\t\tthis.paymentRequest.update(this.get_payment_request_update({\n\t\t\ttotal: {\n\t\t\t\tpending: false\n\t\t\t}\n\t\t}));\n\t\tthis.paymentRequest.show();\n\t};\n\n\t/*********** PaymentRequest *********/\n\tsswps.PaymentRequest = function () {\n\t};\n\n\tsswps.PaymentRequest.prototype.handleActionMethod = 'handleCardAction';\n\tsswps.PaymentRequest.prototype.setupActionMethod = 'confirmCardSetup';\n\n\tsswps.PaymentRequest.prototype.initialize = function () {\n\t\tthis.createPaymentRequest();\n\t\tthis.createPaymentRequestButton();\n\t\tthis.canMakePayment();\n\t\tthis.paymentRequestButton.on('click', this.button_click.bind(this));\n\t};\n\n\tsswps.PaymentRequest.prototype.button_click = function (event) {\n\t};\n\n\tsswps.PaymentRequest.prototype.createPaymentRequestButton = function () {\n\t\tif (this.paymentRequestButton) {\n\t\t\tthis.paymentRequestButton.destroy();\n\t\t}\n\t\tthis.paymentRequestButton = this.elements.create(\"paymentRequestButton\", {\n\t\t\tpaymentRequest: this.paymentRequest,\n\t\t\tstyle: {\n\t\t\t\tpaymentRequestButton: {\n\t\t\t\t\ttype: this.params.button.type,\n\t\t\t\t\ttheme: this.params.button.theme,\n\t\t\t\t\theight: this.params.button.height\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tsswps.PaymentRequest.prototype.canMakePayment = function () {\n\t\treturn new Promise(function (resolve) {\n\t\t\tvar paymentRequest = this.paymentRequest;\n\t\t\tthis.paymentRequest.canMakePayment().then(function (result) {\n\t\t\t\tif (result && !result.applePay && !result.googlePay && paymentRequest === this.paymentRequest) {\n\t\t\t\t\tthis.can_pay = true;\n\t\t\t\t\tthis.create_button();\n\t\t\t\t\t$(this.container).show();\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tsswps.PaymentRequest.prototype.create_button = function () {\n\t\tthis.paymentRequestButton.mount('#sswps-payment-request-container');\n\t};\n\n\tsswps.Afterpay = function () {\n\t};\n\n\tsswps.Afterpay.prototype.is_eligible = function (price) {\n\t\treturn (price >= this.get_min() && price <= this.get_max());\n\t}\n\n\tsswps.Afterpay.prototype.get_min = function () {\n\t\tvar currency = this.get_currency();\n\t\tvar params = this.params.requirements[currency];\n\t\treturn params ? params[1] : 0;\n\t}\n\n\tsswps.Afterpay.prototype.get_max = function () {\n\t\tvar currency = this.get_currency();\n\t\tvar params = this.params.requirements[currency];\n\t\treturn params ? params[2] : 0;\n\t}\n\n\tsswps.Afterpay.prototype.add_eligibility = function (selector, price) {\n\t\tif ($(selector).length) {\n\t\t\tif (this.is_eligible(price)) {\n\t\t\t\t$(selector).removeClass('afterpay-ineligible');\n\t\t\t} else {\n\t\t\t\tif (this.hide_ineligible_active()) {\n\t\t\t\t\t$(selector).addClass('afterpay-ineligible');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.Afterpay.prototype.hide_ineligible_active = function () {\n\t\treturn this.params.hide_ineligible === 'yes';\n\t}\n\n\tsswps.CheckoutFields = function (params, page) {\n\t\tthis.params = params;\n\t\tthis.page = page;\n\t\tthis.session_values = this.supportsSessionStorage() && sessionStorage.getItem('sswps_checkout_fields') ? JSON.parse(sessionStorage.getItem('sswps_checkout_fields')) : {};\n\t\tthis.fields = new Map(Object.keys(this.params).map(function (k) {\n\t\t\tif (this.params[k].value === null) {\n\t\t\t\tif (k in this.session_values && this.session_values[k] !== null) {\n\t\t\t\t\tthis.params[k].value = this.session_values[k];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[k].value = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [k, this.params[k].value];\n\t\t}.bind(this)));\n\n\t\tif ('checkout' === page || ('cart' === page && $(document.body).is('.woocommerce-checkout')) || $('form.woocommerce-checkout').length > 0) {\n\t\t\t$(document.body).on('updated_checkout', this.updated_checkout.bind(this));\n\t\t\t$(document.body).on('change', '[name^=\"billing_\"], [name^=\"shipping_\"]', this.onChange.bind(this));\n\t\t\t$('form.checkout').on('change', '.input-text:not([name^=\"billing_\"], [name^=\"shipping_\"], [name=\"account_password\"]), select:not([name^=\"billing_\"], [name^=\"shipping_\"])', this.onChange.bind(this));\n\t\t\t$('form.checkout').on('change', '[name=\"ship_to_different_address\"]', this.on_ship_to_address_change.bind(this));\n\t\t\tthis.init_i18n();\n\t\t\tif ($('[name=\"ship_to_different_address\"]').is(':checked')) {\n\t\t\t\tthis.update_required_fields($('#shipping_country').val(), 'shipping_country');\n\t\t\t} else {\n\t\t\t\tthis.update_required_fields($('#billing_country').val(), 'billing_country');\n\t\t\t}\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.supportsSessionStorage = function () {\n\t\tif ('sessionStorage' in window && window.sessionStorage !== null) {\n\t\t\treturn ['getItem', 'setItem'].reduce(function (exists, method) {\n\t\t\t\treturn !exists ? exists : method in sessionStorage;\n\t\t\t}.bind(this), true);\n\t\t}\n\t\treturn false;\n\t}\n\n\tsswps.CheckoutFields.prototype.init_i18n = function () {\n\t\tif (typeof wc_address_i18n_params !== 'undefined') {\n\t\t\tthis.locales = JSON.parse(wc_address_i18n_params.locale.replace(/&quot;/g, '\"'));\n\t\t} else {\n\t\t\tthis.locales = null;\n\t\t}\n\t};\n\n\t/**\n\t * Triggered when the WC checkout.js updated_checkout event is fired.\n\t */\n\tsswps.CheckoutFields.prototype.updated_checkout = function () {\n\t\tthis.syncCheckoutFieldsWithDOM();\n\t}\n\n\tsswps.CheckoutFields.prototype.syncCheckoutFieldsWithDOM = function () {\n\t\tfor (var k in this.params) {\n\t\t\tif ($('#' + k).length) {\n\t\t\t\tthis.fields.set(k, $('#' + k).val());\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.CheckoutFields.prototype.onChange = function (e) {\n\t\ttry {\n\t\t\tvar name = e.currentTarget.name,\n\t\t\t\tvalue = e.currentTarget.value;\n\t\t\tthis.fields.set(name, value);\n\n\t\t\tif (name === 'billing_country' || name === 'shipping_country') {\n\t\t\t\tthis.update_required_fields(value, name);\n\t\t\t}\n\t\t\tif (this.supportsSessionStorage()) {\n\t\t\t\tsessionStorage.setItem('sswps_checkout_fields', JSON.stringify(this.toJson()));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.update_required_fields = function (country, name) {\n\t\tif (this.locales) {\n\t\t\tvar prefix = name.indexOf('billing_') > -1 ? 'billing_' : 'shipping_';\n\t\t\tvar locale = typeof this.locales[country] !== 'undefined' ? this.locales[country] : this.locales['default'];\n\t\t\tvar fields = $.extend(true, {}, this.locales['default'], locale);\n\n\t\t\tfor (var k in fields) {\n\t\t\t\tvar k2 = prefix + k;\n\n\t\t\t\tif (this.params[k2]) {\n\t\t\t\t\tthis.params[k2] = $.extend(true, {}, this.params[k2], fields[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.on_ship_to_address_change = function (e) {\n\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\tthis.update_required_fields($('#shipping_country').val(), 'shipping_country');\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.requestFieldInWallet = function (key) {\n\t\tif ('checkout' === this.page) {\n\t\t\treturn this.required(key) && this.isEmpty(key);\n\t\t} else if ('order_pay' === this.page) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.required(key);\n\t};\n\n\tsswps.CheckoutFields.prototype.set = function (k, v, prefix) {\n\t\tif (this[k] && typeof this[k] === 'function') {\n\t\t\tthis[k]().set.call(this, v, prefix);\n\t\t} else {\n\t\t\tthis.fields.set(k, v);\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.get = function (k, prefix) {\n\t\tvar value;\n\t\tif (this[k] && typeof this[k] === 'function') {\n\t\t\tvalue = this[k]().get.call(this, prefix);\n\t\t} else {\n\t\t\tvalue = this.fields.get(k);\n\n\t\t\tif (typeof value === 'undefined' || value === null || value === '') {\n\t\t\t\tif (typeof prefix !== 'undefined') {\n\t\t\t\t\tvalue = prefix;\n\t\t\t\t} else if ($('[name=\"' + k + '\"]').length) {\n\t\t\t\t\tvalue = $('[name=\"' + k + '\"]').val();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn typeof value === 'undefined' ? '' : value;\n\t};\n\n\tsswps.CheckoutFields.prototype.required = function (k) {\n\t\tif (this.params[k]) {\n\t\t\tif (typeof this.params[k].required !== 'undefined') {\n\t\t\t\treturn !!this.params[k].required;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tsswps.CheckoutFields.prototype.exists = function (k) {\n\t\treturn k in this.params;\n\t}\n\n\tsswps.CheckoutFields.prototype.isEmpty = function (k) {\n\t\tif (this.fields.has(k)) {\n\t\t\tvar value = this.fields.get(k);\n\t\t\treturn typeof value === 'undefined' || value === null || typeof value === 'string' && value.trim().length === 0;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tsswps.CheckoutFields.prototype.isValid = function (k) {\n\t\tif (this[k] && typeof this[k] === 'function') {\n\t\t\treturn this[k]().isValid.apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n\tsswps.CheckoutFields.prototype.first_name = function () {\n\t\treturn {\n\t\t\tset: function (v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_first_name', v);\n\t\t\t},\n\t\t\tget: function (prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_first_name');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.CheckoutFields.prototype.last_name = function () {\n\t\treturn {\n\t\t\tset: function (v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_last_name', v);\n\t\t\t},\n\t\t\tget: function (prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_last_name');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tsswps.CheckoutFields.prototype.address_1 = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_address_1', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_address_1');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.address_2 = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_address_2', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_address_2');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.name = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_full_name', v);\n\t\t\t\tvar name = v.split(\" \");\n\t\t\t\tif (name.length > 1) {\n\t\t\t\t\tvar last_name = name.pop();\n\t\t\t\t\tthis.fields.set(prefix + '_first_name', name.join(' '));\n\t\t\t\t\tthis.fields.set(prefix + '_last_name', last_name);\n\t\t\t\t} else if (name.length == 1) {\n\t\t\t\t\tthis.fields.set(prefix + '_first_name', name[0]);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_first_name') + ' ' + this.fields.get(prefix + '_last_name');\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.email = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_email', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_email');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.phone = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_phone', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_phone');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.country = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_country', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_country');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length === 2;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.state = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tv = v.toUpperCase();\n\t\t\t\tif (v.length > 2 && this.page === 'checkout') {\n\t\t\t\t\t$('#' + prefix + '_state option').each(function () {\n\t\t\t\t\t\tvar $option = $(this);\n\t\t\t\t\t\tvar state = $option.text().toUpperCase();\n\t\t\t\t\t\tif (v === state) {\n\t\t\t\t\t\t\tv = $option.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.fields.set(prefix + '_state', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_state');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.city = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_city', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_city');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.postcode = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tthis.fields.set(prefix + '_postcode', v);\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn this.fields.get(prefix + '_postcode');\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\treturn typeof v === 'string' && v.length > 0;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.recipient = function () {\n\t\treturn sswps.CheckoutFields.prototype.name.apply(this, arguments);\n\t}\n\n\tsswps.CheckoutFields.prototype.payerName = function () {\n\t\treturn sswps.CheckoutFields.prototype.name.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.payerEmail = function () {\n\t\treturn sswps.CheckoutFields.prototype.email.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.payerPhone = function () {\n\t\treturn sswps.CheckoutFields.prototype.phone.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.phoneNumber = function () {\n\t\treturn sswps.CheckoutFields.prototype.phone.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.countryCode = function () {\n\t\treturn sswps.CheckoutFields.prototype.country.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.address1 = function () {\n\t\treturn sswps.CheckoutFields.prototype.address_1.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.address2 = function () {\n\t\treturn sswps.CheckoutFields.prototype.address_2.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.line1 = function () {\n\t\treturn sswps.CheckoutFields.prototype.address_1.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.line2 = function () {\n\t\treturn sswps.CheckoutFields.prototype.address_2.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.addressLine = function () {\n\t\treturn {\n\t\t\tset: function set(v, prefix) {\n\t\t\t\tif (v.length > 0) {\n\t\t\t\t\tthis.fields.set(prefix + '_address_1', v[0]);\n\t\t\t\t}\n\n\t\t\t\tif (v.length > 1) {\n\t\t\t\t\tthis.fields.set(prefix + '_address_2', v[1]);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get(prefix) {\n\t\t\t\treturn [this.fields.get(prefix + '_address_1'), this.fields.get(prefix + '_address_2')];\n\t\t\t},\n\t\t\tisValid: function (v) {\n\t\t\t\tif (v.length > 0) {\n\t\t\t\t\treturn typeof v[0] === 'string' && v[0].length > 0;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t};\n\n\tsswps.CheckoutFields.prototype.region = function () {\n\t\treturn sswps.CheckoutFields.prototype.state.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.administrativeArea = function () {\n\t\treturn sswps.CheckoutFields.prototype.state.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.locality = function () {\n\t\treturn sswps.CheckoutFields.prototype.city.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.postal_code = function () {\n\t\treturn sswps.CheckoutFields.prototype.postcode.apply(this, arguments);\n\t}\n\n\tsswps.CheckoutFields.prototype.postalCode = function () {\n\t\treturn sswps.CheckoutFields.prototype.postcode.apply(this, arguments);\n\t};\n\n\tsswps.CheckoutFields.prototype.toJson = function () {\n\t\tvar data = {};\n\t\tthis.fields.forEach(function (value, key) {\n\t\t\tdata[key] = value;\n\t\t});\n\t\treturn data;\n\t};\n\n\tsswps.CheckoutFields.prototype.toFormFields = function (args) {\n\t\tvar changes = [];\n\t\tthis.fields.forEach(function (value, key) {\n\t\t\tvar name = '[name=\"' + key + '\"]';\n\n\t\t\tif ($(name).length && value !== '') {\n\t\t\t\tif ($(name).val() !== value && $(name).is('select')) {\n\t\t\t\t\tchanges.push(name);\n\t\t\t\t}\n\n\t\t\t\t$(name).val(value);\n\t\t\t}\n\t\t});\n\t\tif (changes.length > 0) {\n\t\t\t$(changes.join(',')).trigger('change');\n\t\t}\n\t\tif (typeof args !== 'undefined') {\n\t\t\t$(document.body).trigger('update_checkout', args);\n\t\t}\n\t};\n\n\tsswps.CheckoutFields.prototype.validateFields = function (prefix) {\n\t\tfor (var k in this.params) {\n\t\t\tvar field = this.params[k];\n\t\t\tif (k.indexOf(prefix) > -1 && field.required) {\n\t\t\t\tif ($('#' + k).length && $('#' + k).is(':visible')) {\n\t\t\t\t\tvar val = $('#' + k).val();\n\t\t\t\t\tif (typeof val === 'undefined' || val === null || val.length === 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\ttry {\n\t\tstripe = Stripe(sswps_params_v3.api_key, sswps_params_v3.stripeParams);\n\t\tsswps.stripe = stripe;\n\t} catch (error) {\n\t\t//window.alert(error);\n\t\tconsole.log(error);\n\t}\n\n\tvar checkoutFields = new sswps.CheckoutFields(sswps_checkout_fields, sswps_params_v3.page);\n})(window, jQuery, window.sswps);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import './sswps.js';\n\nexport const BaseGateway = window.sswps.BaseGateway;\nexport const AfterPay = window.sswps.AfterPay;\nexport const ApplePay = window.sswps.ApplePay;\nexport const CartGateway = window.sswps.CartGateway;\nexport const CheckoutFields = window.sswps.CheckoutFields;\nexport const CheckoutGateway = window.sswps.CheckoutGateway;\nexport const GooglePay = window.sswps.GooglePay;\nexport const PaymentRequest = window.sswps.PaymentRequest;\nexport const ProductGateway = window.sswps.ProductGateway;\nexport const stripe = window.sswps.stripe;\nexport const sswps = window.sswps;","import $ from 'jquery';\nimport {BaseGateway, CheckoutGateway} from '@simple-secure-stripe/sswps-exports';\n\nfunction StripeACH(params) {\n    BaseGateway.call(this, params);\n    CheckoutGateway.call(this);\n}\n\n\nStripeACH.prototype.initialize = function () {\n    window.addEventListener('hashchange', this.hashchange.bind(this));\n    $(document.body).on('payment_method_selected', this.payment_method_selected.bind(this));\n    $(document.body).on('click', '#place_order', this.on_order_pay.bind(this));\n}\n\nStripeACH.prototype.checkout_place_order = function () {\n    this.payment_token_received = true;\n    return CheckoutGateway.prototype.checkout_place_order.apply(this);\n}\n\nStripeACH.prototype.on_order_pay = function (e) {\n    if (this.is_gateway_selected()) {\n        // create the setup intent.\n        if (this.is_change_payment_method()) {\n            const {order_id, order_key} = this.params;\n            e.preventDefault();\n            this.create_setup_intent({order_id, order_key}).then(({setup_intent}) => {\n                this.handle_payment_method_setup({\n                    order_id,\n                    order_key,\n                    client_secret: setup_intent.client_secret\n                });\n            });\n        } else if (this.is_current_page('order_pay')) {\n            e.preventDefault();\n            this.process_order_pay();\n        }\n    }\n}\n\nStripeACH.prototype.handle_next_action = function (data) {\n    const {client_secret} = data;\n    this.stripe.collectBankAccountForPayment({\n        clientSecret: client_secret,\n        params: {\n            payment_method_type: 'us_bank_account',\n            payment_method_data: {\n                billing_details: {\n                    name: this.get_customer_name(this.get_billing_prefix()),\n                    email: this.fields.get('billing_email', null),\n                },\n            },\n        }\n    }).then(({paymentIntent, error}) => {\n        if (error) {\n            return this.submit_error(error);\n        }\n        // show the mandate confirmation\n        if (paymentIntent.status === \"requires_confirmation\") {\n            this.do_payment_confirmation(data);\n        } else {\n            this.cancel_payment_processing();\n        }\n    });\n}\n\nStripeACH.prototype.handle_payment_method_setup = function (data) {\n    const {client_secret} = data;\n    this.stripe.collectBankAccountForSetup({\n        clientSecret: client_secret,\n        params: {\n            payment_method_type: 'us_bank_account',\n            payment_method_data: {\n                billing_details: {\n                    name: this.get_customer_name(this.get_billing_prefix()),\n                    email: this.fields.get('billing_email', null),\n                },\n            },\n        }\n    }).then(({setupIntent, error}) => {\n        if (error) {\n            return this.submit_error(error);\n        }\n        // show the mandate confirmation\n        if (setupIntent.status === \"requires_confirmation\") {\n            this.do_setup_confirmation(data);\n        } else {\n            this.cancel_payment_processing();\n        }\n    });\n}\n\nStripeACH.prototype.do_payment_confirmation = function ({client_secret, order_id, order_key}) {\n    this.stripe.confirmUsBankAccountPayment(client_secret).then(({paymentIntent, error}) => {\n        if (error) {\n            return this.submit_error(error);\n        }\n        if (paymentIntent.status === 'requires_payment_method') {\n            this.cancel_payment_processing();\n        } else if (paymentIntent.status === 'requires_action') {\n            // paymentIntent?.next_action?.type === 'verify_with_microdeposits'\n            // todo - eventually support microdeposits. For now, show a message\n            this.cancel_payment_processing();\n            return this.submit_error({code: 'ach_instant_only'});\n        } else if (paymentIntent.status === 'processing') {\n            this.set_nonce(paymentIntent.payment_method);\n            if (this.is_current_page('order_pay')) {\n                this.get_form().trigger('submit');\n            } else {\n                this.process_payment(order_id, order_key);\n            }\n        }\n    });\n}\n\nStripeACH.prototype.do_setup_confirmation = function ({client_secret, order_id, order_key}) {\n    this.stripe.confirmUsBankAccountSetup(client_secret).then(({setupIntent, error}) => {\n        if (error) {\n            return this.submit_error(error);\n        }\n        if (setupIntent.status === 'requires_payment_method') {\n            this.cancel_payment_processing();\n        } else if (setupIntent.status === 'requires_action') {\n            // paymentIntent?.next_action?.type === 'verify_with_microdeposits'\n            // todo - eventually support microdeposits. For now, show a message\n            this.cancel_payment_processing();\n            return this.submit_error({code: 'ach_instant_only'});\n        } else if (setupIntent.status === 'succeeded') {\n            this.set_nonce(setupIntent.payment_method);\n            if (this.is_current_page('order_pay') || this.is_change_payment_method()) {\n                this.get_form().trigger('submit');\n            } else {\n                this.process_payment(order_id, order_key);\n            }\n        }\n    });\n}\n\nStripeACH.prototype.hide_place_order = function () {\n}\n\nStripeACH.prototype.show_payment_button = function () {\n    this.show_place_order();\n}\n\nStripeACH.prototype.cancel_payment_processing = function () {\n    $(this.container).closest('form').removeClass('processing');\n    $(this.container).closest('form')?.unblock();\n}\n\nStripeACH.prototype.fees_enabled = function () {\n    return this.params.fees_enabled == \"1\";\n}\n\nStripeACH.prototype.payment_method_selected = function () {\n    if (this.fees_enabled()) {\n        $(document.body).trigger('update_checkout');\n    }\n}\n\nStripeACH.prototype.create_setup_intent = function (data) {\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            method: 'POST',\n            dataType: 'json',\n            data: {payment_method: this.gateway_id, ...data},\n            url: this.params.routes.base_path.replace('%s', 'sswps/v1/subscriptions/setup-intent'),\n            beforeSend: this.ajax_before_send.bind(this)\n        }).done(response => {\n            if (response.code) {\n                reject(response.message);\n            } else {\n                resolve(response);\n            }\n        }).fail((xhr, textStatus, errorThrown) => {\n            this.submit_error(errorThrown);\n        });\n    })\n}\n\nStripeACH.prototype = {...BaseGateway.prototype, ...CheckoutGateway.prototype, ...StripeACH.prototype};\n\nnew StripeACH(sswps_ach_connections_params);"],"names":["window","sswps","$","stripe","sswps_checkout_fields","BaseGateway","params","container","this","gateway_id","concat","length","token_selector","saved_method_selector","payment_token_received","fields","checkoutFields","elements","create_stripe_elements","initialize","console","log","prototype","elementOptions","get_element_options","extend","local","is_user_logged_in","user_id","get_page","page","sswps_params_v3","document","body","is","set_nonce","value","set","val","set_intent","create_button","is_gateway_selected","is_saved_method_selected","has_checkout_error","submit_error","error","skip_form","message","get_error_message","indexOf","classes","is_current_page","bind","custom_message","triggerHandler","submit_message","submit_error_code","code","_typeof","hasOwnProperty","sswps_messages","remove","$container","message_container","closest","prepend","removeClass","unblock","find","trigger","scroll_to_notices","animate","scrollTop","offset","top","get_billing_details","prefix","get_billing_prefix","details","name","get_customer_name","address","city","get","country","line1","line2","postal_code","state","email","phone","get_first_name","get_last_name","get_shipping_prefix","needs_shipping","filtered_prefix","should_save_method","is_add_payment_method_page","hasClass","is_change_payment_method","get_selected_payment_method","get_gateway_data","get_currency","currency","data","set_gateway_data","has_gateway_data","get_customer_email","get_address_field_hash","hash","i","block","blockUI","overlayCSS","background","opacity","unblockUI","get_form","get_total_price","total","get_total_price_cents","total_cents","set_total_price","set_total_price_cents","set_payment_method","payment_method","prop","set_selected_shipping_methods","shipping_methods","method","on_token_received","paymentMethod","id","process_checkout","createPaymentRequest","payment_request_options","get_payment_request_options","paymentRequest","requestShipping","on","update_shipping_address","update_shipping_method","on_payment_method_received","err","options","country_code","toLowerCase","amount","label","total_label","pending","requestPayerName","is_valid_address","get_address_object","requestPayerEmail","requestFieldInWallet","requestPayerPhone","displayItems","get_display_items","shippingOptions","get_shipping_options","get_payment_request_update","parseInt","items","set_display_items","shipping_options","set_shipping_options","map_address","postcode","postalCode","region","paymentResponse","payment_response","populate_checkout_fields","complete","alert","update_addresses","payerName","payerEmail","payerPhone","exists","isEmpty","shippingAddress","populate_shipping_fields","billing_details","populate_billing_fields","populate_address_fields","k","get_address_fields","forEach","Array","isArray","exclude","isEmptyObject","mappings","splice","required","isValid","ajax_before_send","xhr","setRequestHeader","rest_nonce","Promise","ajax","url","routes","checkout","dataType","serialize_fields","page_id","beforeSend","done","result","reload","location","redirect","messages","fail","textStatus","errorThrown","process_payment","order_id","order_key","checkout_payment","toJson","wc_checkout_params","i18n_checkout_error","handle_next_action","obj","handleActionMethod","client_secret","then","handle_payment_method_setup","setupActionMethod","hashchange","e","match","JSON","parse","atob","decodeURIComponent","history","pushState","pathname","type","sync_payment_intent","resolve","reject","sync_intent","response","create_setup_intent","setup_intent","intent","serialize_form","$form","formData","filter","serializeArray","map_shipping_methods","shippingData","methods","matches","maybe_set_ship_to_different","ev","shipping_address","updateWith","newData","shipping_method","shippingOption","CheckoutGateway","banner_container","update_checkout","updated_checkout","container_styles","checkout_error","checkout_place_order","on_show_new_methods","on_show_saved_methods","on_payment_method_selected","banner_enabled","css","outerWidth","hasOrderReviewParams","description","addClass","search","payment_nonce","set_use_new_option","has3DSecureParams","pm","save_method","set_save_payment_method","apply","arguments","toFormFields","show_payment_button","hide_place_order","is_valid_checkout","get_payment_method","bool","terms","hide_payment_button","show_place_order","$button","show","hide","trigger_payment_method_selected","show_new_payment_method","checkout_fields_valid","valid","validateFields","required_field","cart_contains_subscription","sswps_cart_contains_subscription","process_order_pay","push","order_pay","param","success","needs_confirmation","href","jqXHR","handle_create_account_change","linkPaymentEnabled","show_save_card","hide_save_card","ProductGateway","found_variation","reset_variation_data","buttonWidth","marginLeft","replace","call","get_add_to_cart_data","get_quantity","set_rest_nonce","nonce","variation","product","price","display_price","price_cents","display_price_cents","is_virtual","get_product_data","set_product_data","disable_payment_button","get_button","enable_payment_button","is_variable_product","variable_product_selected","product_id","variation_id","qty","add_to_cart","get_product_variations","totalCents","cart_calculation","processing_calculation","update_from_cart_calculation","variations","each","index","el","$el","attr","CartGateway","updated_html","cart_emptied","add_cart_totals_class","GooglePay","googlePayBaseRequest","apiVersion","apiVersionMinor","baseCardPaymentMethod","parameters","allowedAuthMethods","allowedCardNetworks","assuranceDetailsRequired","paymentData","paymentMethodData","info","billingAddress","billing_address","billing_address_object","phoneNumber","locality","administrativeArea","countryCode","update_payment_data","extraData","shippingOptionData","when","payment_data","on_payment_data_changed","paymentRequestUpdate","payment_data_updated","get_merchant_info","merchantId","merchant_id","merchantName","merchant_name","environment","get_payment_options","merchantInfo","paymentDataCallbacks","onPaymentAuthorized","transactionState","onPaymentDataChanged","build_payment_request","request","emailRequired","allowedPaymentMethods","tokenizationSpecification","gateway","api_key","shippingAddressRequired","transactionInfo","processing_country","currencyCode","totalPriceStatus","totalPrice","toString","totalPriceLabel","total_price_label","billingAddressRequired","billingAddressParameters","format","phoneNumberRequired","shippingAddressParameters","shippingOptionRequired","shippingOptionParameters","callbackIntents","createPaymentsClient","paymentsClient","google","payments","api","PaymentsClient","isReadyToPay","isReadyToPayRequest","can_pay","createButton","get_button_options","is_rectangle_button","button_shape","onClick","start","buttonColor","button_color","buttonType","button_style","buttonSizeMode","button_size_mode","button_locale","buttonLocale","loadPaymentData","tokenizationData","token","createPaymentMethod","card","statusCode","statusMessage","ApplePay","canMakePayment","disableWallets","button","append_button","applePay","preventDefault","update","PaymentRequest","createPaymentRequestButton","paymentRequestButton","button_click","event","destroy","create","style","theme","height","googlePay","mount","Afterpay","is_eligible","get_min","get_max","requirements","add_eligibility","selector","hide_ineligible_active","hide_ineligible","CheckoutFields","session_values","supportsSessionStorage","sessionStorage","getItem","Map","Object","keys","map","onChange","on_ship_to_address_change","init_i18n","update_required_fields","reduce","wc_address_i18n_params","locales","locale","syncCheckoutFieldsWithDOM","currentTarget","setItem","stringify","k2","key","v","has","trim","slice","first_name","last_name","address_1","address_2","split","pop","join","toUpperCase","$option","text","recipient","address1","address2","addressLine","args","changes","field","Stripe","stripeParams","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","AfterPay","StripeACH","addEventListener","payment_method_selected","on_order_pay","_this","_this$params","_ref","_this2","collectBankAccountForPayment","clientSecret","payment_method_type","payment_method_data","_ref2","paymentIntent","status","do_payment_confirmation","cancel_payment_processing","_this3","collectBankAccountForSetup","_ref3","setupIntent","do_setup_confirmation","_ref4","_this4","confirmUsBankAccountPayment","_ref5","_ref6","_this5","confirmUsBankAccountSetup","_ref7","_$$closest","fees_enabled","_this6","_objectSpread","base_path","sswps_ach_connections_params"],"sourceRoot":""}