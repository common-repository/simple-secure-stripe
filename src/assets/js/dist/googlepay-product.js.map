{"version":3,"file":"googlepay-product.js","mappings":"CAAC,SAAUA,EAAGC,GAKV,SAASC,IACLD,EAAME,YAAYC,KAAKC,KAAMC,gCAC7BC,OAAOC,iBAAiB,aAAcH,KAAKI,WAAWC,KAAKL,MAC/D,CAMAH,EAAKS,UAAYX,EAAEY,OAAO,CAAC,EAAGX,EAAME,YAAYQ,UAAWV,EAAMY,eAAeF,UAAWV,EAAMa,UAAUH,WAK3GT,EAAKS,UAAUI,WAAa,WACxB,IAAKf,EAAEK,KAAKW,WAAWC,OACnB,OAAOC,WAAWb,KAAKU,WAAWL,KAAKL,MAAO,KAElDJ,EAAMY,eAAeT,KAAKC,MAC1BA,KAAKc,uBACLd,KAAKe,eAAeC,KAAK,WACrBrB,EAAEsB,SAASC,MAAMC,GAAG,SAAU,oBAAqBnB,KAAKoB,qBAAqBf,KAAKL,OAClFL,EAAEK,KAAKW,WAAWU,OAClB1B,EAAEK,KAAKW,WAAWW,SAASA,SAASC,SAAS,UACxCvB,KAAKwB,sBAGFxB,KAAKyB,4BACLzB,KAAK0B,iBAAiB1B,KAAK2B,mBAAmBC,UAAUC,cAExD7B,KAAK8B,yBALT9B,KAAK0B,kBAQb,EAAErB,KAAKL,MACX,EAEAH,EAAKS,UAAUc,qBAAuB,WAClCpB,KAAK8B,yBACA9B,KAAKwB,wBAAyBxB,KAAKyB,6BACpCzB,KAAK0B,mBAAmBV,KAAK,SAAUe,GACnC/B,KAAKgC,uBACT,EAAE3B,KAAKL,OAAM,MAAO,WAChBA,KAAKgC,uBACT,EAAE3B,KAAKL,MAEf,EAEAH,EAAKS,UAAU2B,gBAAkB,WAC7BrC,EAAMY,eAAeF,UAAU2B,gBAAgBC,MAAMlC,KAAMmC,WACvDnC,KAAKoC,SACLpC,KAAKoB,sBAEb,EAEAvB,EAAKS,UAAUoB,iBAAmB,WAC9B,OAAO9B,EAAMY,eAAeF,UAAUoB,iBAAiBQ,MAAMlC,KAAMmC,WAAWnB,KAAK,SAAUe,GACzF/B,KAAKqC,6BAA6BN,EACtC,EAAE1B,KAAKL,MACX,EAKAH,EAAKS,UAAUgC,cAAgB,WAC3B,IAAI3B,EAAYM,SAASsB,iBAAiB,sCACtC5B,GAAaA,EAAUC,OAAS,GAC5BZ,KAAKwC,SACLxC,KAAKwC,QAAQC,SAEjB9C,EAAE+C,KAAK/B,EAAW,SAAUgC,EAAKC,GAC7B,IAAIJ,EAAU7C,EAAEK,KAAK6C,eAAeC,aAAa9C,KAAK+C,uBACtDP,EAAQjB,SAAS,yBACbvB,KAAKgD,uBACLR,EAAQS,KAAK,UAAUC,YAAY,aAEvCvD,EAAEiD,GAAMO,OAAOX,EACnB,EAAEnC,KAAKL,OACPA,KAAKwC,QAAU7C,EAAE,sCAAsCsD,KAAK,4BAE5DrD,EAAMa,UAAUH,UAAUgC,cAAcJ,MAAMlC,KAAMmC,WACpDxC,EAAE,8BAA8BwD,OAAOnD,KAAKwC,UAI5CxC,KAAKwB,wBACAxB,KAAKyB,4BAGNzB,KAAKgC,wBAFLhC,KAAK8B,yBAKjB,EAKAjC,EAAKS,UAAU8C,WAAa,WACxB,OAAOpD,KAAKwC,QAAQS,KAAK,SAC7B,EAKApD,EAAKS,UAAU+C,MAAQ,WACfrD,KAAKsD,eAAiB,GACjBtD,KAAKuD,kBACNvD,KAAKwD,cAET5D,EAAMa,UAAUH,UAAU+C,MAAMnB,MAAMlC,KAAMmC,YAE5CnC,KAAKyD,aAAazD,KAAK0D,OAAOC,SAASC,eAE/C,EAEA/D,EAAKS,UAAUuD,oBAAsB,SAAU9B,GAC3C,OAAOnC,EAAMa,UAAUH,UAAUuD,oBAAoB9D,KAAKC,KAAM+B,EAAM/B,KAAK8D,uBAC/E,EAEA,IAAIjE,CAEP,CA7HA,CA6HCkE,OAAQnE","sources":["webpack://simple-secure-stripe/./src/assets/js/frontend/googlepay-product.js"],"sourcesContent":["(function ($, sswps) {\n\n    /**\n     * @constructor\n     */\n    function GPay() {\n        sswps.BaseGateway.call(this, sswps_googlepay_product_params);\n        window.addEventListener('hashchange', this.hashchange.bind(this));\n    }\n\n    /**\n     * [prototype description]\n     * @type {[type]}\n     */\n    GPay.prototype = $.extend({}, sswps.BaseGateway.prototype, sswps.ProductGateway.prototype, sswps.GooglePay.prototype);\n\n    /**\n     * @return {[type]}\n     */\n    GPay.prototype.initialize = function () {\n        if (!$(this.container).length) {\n            return setTimeout(this.initialize.bind(this), 1000);\n        }\n        sswps.ProductGateway.call(this);\n        this.createPaymentsClient();\n        this.isReadyToPay().then(function () {\n            $(document.body).on('change', '[name=\"quantity\"]', this.maybe_calculate_cart.bind(this));\n            $(this.container).show();\n            $(this.container).parent().parent().addClass('active');\n            if (!this.is_variable_product()) {\n                this.cart_calculation();\n            } else {\n                if (this.variable_product_selected()) {\n                    this.cart_calculation(this.get_product_data().variation.variation_id);\n                } else {\n                    this.disable_payment_button();\n                }\n            }\n        }.bind(this))\n    }\n\n    GPay.prototype.maybe_calculate_cart = function () {\n        this.disable_payment_button();\n        if (!this.is_variable_product() || this.variable_product_selected()) {\n            this.cart_calculation().then(function (data) {\n                this.enable_payment_button();\n            }.bind(this)).catch(function () {\n                this.enable_payment_button();\n            }.bind(this));\n        }\n    }\n\n    GPay.prototype.found_variation = function () {\n        sswps.ProductGateway.prototype.found_variation.apply(this, arguments);\n        if (this.can_pay) {\n            this.maybe_calculate_cart();\n        }\n    }\n\n    GPay.prototype.cart_calculation = function () {\n        return sswps.ProductGateway.prototype.cart_calculation.apply(this, arguments).then(function (data) {\n            this.update_from_cart_calculation(data);\n        }.bind(this))\n    }\n\n    /**\n     * @return {[type]}\n     */\n    GPay.prototype.create_button = function () {\n        var container = document.querySelectorAll('.sswps-googlepay-product-container');\n        if (container && container.length > 1) {\n            if (this.$button) {\n                this.$button.remove();\n            }\n            $.each(container, function (idx, node) {\n                var $button = $(this.paymentsClient.createButton(this.get_button_options()));\n                $button.addClass('gpay-button-container');\n                if (this.is_rectangle_button()) {\n                    $button.find('button').removeClass('new_style');\n                }\n                $(node).append($button);\n            }.bind(this));\n            this.$button = $('.sswps-googlepay-product-container').find('.gpay-button-container');\n        } else {\n            sswps.GooglePay.prototype.create_button.apply(this, arguments);\n            $('#sswps-googlepay-container').append(this.$button);\n        }\n\n        // check for variations\n        if (this.is_variable_product()) {\n            if (!this.variable_product_selected()) {\n                this.disable_payment_button();\n            } else {\n                this.enable_payment_button();\n            }\n        }\n    }\n\n    /**\n     * @return {[type]}\n     */\n    GPay.prototype.get_button = function () {\n        return this.$button.find('button');\n    }\n\n    /**\n     * @return {[type]}\n     */\n    GPay.prototype.start = function () {\n        if (this.get_quantity() > 0) {\n            if (!this.needs_shipping()) {\n                this.add_to_cart();\n            }\n            sswps.GooglePay.prototype.start.apply(this, arguments);\n        } else {\n            this.submit_error(this.params.messages.invalid_amount);\n        }\n    }\n\n    GPay.prototype.update_payment_data = function (data) {\n        return sswps.GooglePay.prototype.update_payment_data.call(this, data, this.get_add_to_cart_data());\n    }\n\n    new GPay();\n\n}(jQuery, sswps))"],"names":["$","sswps","GPay","BaseGateway","call","this","sswps_googlepay_product_params","window","addEventListener","hashchange","bind","prototype","extend","ProductGateway","GooglePay","initialize","container","length","setTimeout","createPaymentsClient","isReadyToPay","then","document","body","on","maybe_calculate_cart","show","parent","addClass","is_variable_product","variable_product_selected","cart_calculation","get_product_data","variation","variation_id","disable_payment_button","data","enable_payment_button","found_variation","apply","arguments","can_pay","update_from_cart_calculation","create_button","querySelectorAll","$button","remove","each","idx","node","paymentsClient","createButton","get_button_options","is_rectangle_button","find","removeClass","append","get_button","start","get_quantity","needs_shipping","add_to_cart","submit_error","params","messages","invalid_amount","update_payment_data","get_add_to_cart_data","jQuery"],"sourceRoot":""}