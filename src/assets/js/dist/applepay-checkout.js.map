{"version":3,"file":"applepay-checkout.js","mappings":"CAAC,SAAUA,EAAGC,GAKV,SAASC,IACLD,EAAME,YAAYC,KAAKC,KAAMC,+BACjC,CAMAJ,EAASK,UAAYP,EAAEQ,OAAO,CAAC,EAAGP,EAAME,YAAYI,UAAWN,EAAMQ,gBAAgBF,UAAWN,EAAMC,SAASK,WAE/GL,EAASK,UAAUG,WAAa,WAC5BT,EAAMQ,gBAAgBL,KAAKC,MAC3BL,EAAE,iBAAiBW,GAAG,SAAU,4CAA6CN,KAAKO,uBAAuBC,KAAKR,OAC1GL,EAAEK,KAAKS,WAAWC,QAClBd,EAAMC,SAASK,UAAUG,WAAWN,KAAKC,KAEjD,EAEAH,EAASK,UAAUS,eAAiB,WAChCf,EAAMC,SAASK,UAAUS,eAAeC,MAAMZ,KAAMa,WAAWC,KAAK,WAChE,GAAId,KAAKe,iBAAkB,CACvB,IAAIC,EAAUrB,EAAEK,KAAKiB,OAAOC,QAC5BF,EAAQG,SAAS,mBACjBH,EAAQV,GAAG,QAASN,KAAKoB,MAAMZ,KAAKR,OACpCL,EAAEK,KAAKqB,kBAAkBC,QAAQC,OAAOP,GACxCrB,EAAEK,KAAKqB,kBAAkBG,OAAOL,SAAS,UAAUM,QAAQ,0BAA0BN,SAAS,SAClG,CACJ,EAAEX,KAAKR,MACX,EAKAH,EAASK,UAAUwB,cAAgB,WAC/B/B,EAAE,gBAAgBgC,MAAM3B,KAAKgB,SAC7BhB,KAAK4B,iCACT,EAEA/B,EAASK,UAAU2B,iBAAmB,WAC9BlC,EAAEK,KAAKS,WAAWC,QAClBd,EAAMC,SAASK,UAAUG,WAAWN,KAAKC,KAEjD,EAMAH,EAASK,UAAUkB,MAAQ,SAAUU,GAC7BnC,EAAEmC,EAAEC,QAAQC,GAAG,sBACfhC,KAAKiC,mBAAmBjC,KAAKkC,YAC7BlC,KAAKmC,oBAAmB,GACxBxC,EAAE,kBAAkByC,KAAK,WAAW,IAExCxC,EAAMC,SAASK,UAAUkB,MAAMR,MAAMZ,KAAMa,UAC/C,EAEAhB,EAASK,UAAUmC,kBAAoB,WACnCzC,EAAMQ,gBAAgBF,UAAUmC,kBAAkBzB,MAAMZ,KAAMa,WAC1Db,KAAKsC,wBAAwBC,iBAC7BvC,KAAKwC,8BAETxC,KAAKyC,OAAOC,aAAa,CAACC,wBAAwB,IAC9C3C,KAAK4C,yBACL5C,KAAK6C,WAAWC,QAAQ,SAEhC,EAEAjD,EAASK,UAAUK,uBAAyB,WACpCZ,EAAEK,KAAKS,WAAWC,QAClBd,EAAMC,SAASK,UAAUG,WAAWN,KAAKC,KAEjD,EAEA,IAAIH,CAEP,CAjFA,CAiFCkD,OAAQC,OAAOpD","sources":["webpack://simple-secure-stripe/./src/assets/js/frontend/applepay-checkout.js"],"sourcesContent":["(function ($, sswps) {\n\n    /**\n     * @constructor\n     */\n    function ApplePay() {\n        sswps.BaseGateway.call(this, sswps_applepay_checkout_params);\n    }\n\n    /**\n     * [prototype description]\n     * @type {[type]}\n     */\n    ApplePay.prototype = $.extend({}, sswps.BaseGateway.prototype, sswps.CheckoutGateway.prototype, sswps.ApplePay.prototype);\n\n    ApplePay.prototype.initialize = function () {\n        sswps.CheckoutGateway.call(this);\n        $('form.checkout').on('change', '.form-row:not(.address-field) .input-text', this.update_payment_request.bind(this));\n        if ($(this.container).length) {\n            sswps.ApplePay.prototype.initialize.call(this);\n        }\n    }\n\n    ApplePay.prototype.canMakePayment = function () {\n        sswps.ApplePay.prototype.canMakePayment.apply(this, arguments).then(function () {\n            if (this.banner_enabled()) {\n                var $button = $(this.params.button);\n                $button.addClass('banner-checkout');\n                $button.on('click', this.start.bind(this));\n                $(this.banner_container).empty().append($button);\n                $(this.banner_container).show().addClass('active').closest('.sswps-banner-checkout').addClass('active');\n            }\n        }.bind(this))\n    }\n\n    /**\n     * @return {[type]}\n     */\n    ApplePay.prototype.append_button = function () {\n        $('#place_order').after(this.$button);\n        this.trigger_payment_method_selected();\n    }\n\n    ApplePay.prototype.updated_checkout = function () {\n        if ($(this.container).length) {\n            sswps.ApplePay.prototype.initialize.call(this);\n        }\n    }\n\n    /**\n     * [Wrapper for main start function]\n     * @param  {[@event]} e [description]\n     */\n    ApplePay.prototype.start = function (e) {\n        if ($(e.target).is('.banner-checkout')) {\n            this.set_payment_method(this.gateway_id);\n            this.set_use_new_option(true);\n            $('[name=\"terms\"]').prop('checked', true);\n        }\n        sswps.ApplePay.prototype.start.apply(this, arguments);\n    }\n\n    ApplePay.prototype.on_token_received = function () {\n        sswps.CheckoutGateway.prototype.on_token_received.apply(this, arguments);\n        if (this.payment_request_options.requestShipping) {\n            this.maybe_set_ship_to_different();\n        }\n        this.fields.toFormFields({update_shipping_method: false});\n        if (this.checkout_fields_valid()) {\n            this.get_form().trigger('submit');\n        }\n    }\n\n    ApplePay.prototype.update_payment_request = function () {\n        if ($(this.container).length) {\n            sswps.ApplePay.prototype.initialize.call(this);\n        }\n    }\n\n    new ApplePay();\n\n}(jQuery, window.sswps))"],"names":["$","sswps","ApplePay","BaseGateway","call","this","sswps_applepay_checkout_params","prototype","extend","CheckoutGateway","initialize","on","update_payment_request","bind","container","length","canMakePayment","apply","arguments","then","banner_enabled","$button","params","button","addClass","start","banner_container","empty","append","show","closest","append_button","after","trigger_payment_method_selected","updated_checkout","e","target","is","set_payment_method","gateway_id","set_use_new_option","prop","on_token_received","payment_request_options","requestShipping","maybe_set_ship_to_different","fields","toFormFields","update_shipping_method","checkout_fields_valid","get_form","trigger","jQuery","window"],"sourceRoot":""}