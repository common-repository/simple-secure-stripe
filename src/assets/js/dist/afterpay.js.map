{"version":3,"file":"afterpay.js","mappings":"CAAA,SAAWA,EAAGC,GAEV,SAASC,IACT,CAUA,SAASC,EAAgBC,GACrBH,EAAMI,YAAYC,KAAKC,KAAMH,GAC7BH,EAAMO,eAAeF,KAAKC,MAC1BP,EAAES,SAASC,MAAMC,GAAG,SAAU,oBAAqBJ,KAAKK,cAAcC,KAAKN,MAAM,GACrF,CA+DA,SAASO,EAAaV,GAClBH,EAAMI,YAAYC,KAAKC,KAAMH,GAC7BH,EAAMc,YAAYT,KAAKC,KAC3B,CA9EAL,EAAMc,UAAUC,sBAAwB,WACpC,OAAOV,KAAKH,OAAOc,WAAWC,QAAQZ,KAAKa,iBAAmB,CAClE,EAYAjB,EAAgBa,UAAYhB,EAAEqB,OAAO,CAAC,EAAGpB,EAAMI,YAAYW,UAAWf,EAAMO,eAAeQ,UAAWd,EAAMc,UAAWf,EAAMqB,SAASN,WAEtIb,EAAgBa,UAAUO,WAAa,YAC9BhB,KAAKiB,YAAcjB,KAAKU,0BACzBV,KAAKkB,iBACLlB,KAAKK,gBACLL,KAAKmB,gBAAgB,8BAA+BnB,KAAKoB,qBAEjE,EAEAxB,EAAgBa,UAAUW,kBAAoB,SAAUC,GACpD,IAAIC,EAAM7B,EAAE,qBAAqB8B,MAIjC,OAHKD,IACDA,EAAM,GAEND,EACOrB,KAAKwB,mBAAmBC,YAAcC,SAASJ,GAEnDtB,KAAKwB,mBAAmBG,MAAQD,SAASJ,EACpD,EAEA1B,EAAgBa,UAAUS,eAAiB,WACvClB,KAAKiB,WAAajB,KAAK4B,SAASC,OAAO,0BAA2BpC,EAAEqB,OAAO,CAAC,EAAGd,KAAKH,OAAOiC,YAAa,CACpGC,OAAQ/B,KAAKoB,mBAAkB,GAC/BY,SAAUhC,KAAKa,iBAEvB,EAEAjB,EAAgBa,UAAUwB,gBAAkB,WACxCvC,EAAMO,eAAeQ,UAAUwB,gBAAgBC,MAAMlC,KAAMmC,WAC3DnC,KAAKK,eAAc,EACvB,EAEAT,EAAgBa,UAAUJ,cAAgB,SAAU+B,GAC5CpC,KAAKiB,aACDmB,GACApC,KAAKiB,WAAWmB,OAAO,CACnBL,OAAQ/B,KAAKoB,mBAAkB,GAC/BY,SAAUhC,KAAKa,eACfwB,WAAYrC,KAAKsC,YAAYtC,KAAKoB,uBAGhC3B,EAAE,+BACH8C,SACD9C,EAAE,mBAAmB8C,OACrB9C,EAAE,mBAAmB+C,OAAO,+CAExB/C,EAAE,UAAU8C,QACZ9C,EAAEA,EAAE,UAAU,IAAI+C,OAAO,gDAIrCxC,KAAKiB,WAAWwB,MAAM,+BAG9B,EAWAlC,EAAaE,UAAYhB,EAAEqB,OAAO,CAAC,EAAGpB,EAAMI,YAAYW,UAAWf,EAAMc,YAAYC,UAAWd,EAAMc,UAAWf,EAAMqB,SAASN,WAEhIF,EAAaE,UAAUO,WAAa,YAC3BhB,KAAKiB,YAAcxB,EAAEO,KAAK0C,WAAWH,QAAUvC,KAAKU,0BACrDV,KAAKkB,iBACLlB,KAAKK,gBACLL,KAAKmB,gBAAgB,iCAAkCnB,KAAK2C,mBAEpE,EAEApC,EAAaE,UAAUS,eAAiB,WACpClB,KAAKiB,WAAajB,KAAK4B,SAASC,OAAO,0BAA2BpC,EAAEqB,OAAO,CAAC,EAAGd,KAAKH,OAAOiC,YAAa,CACpGC,OAAQ/B,KAAK4C,wBACbZ,SAAUhC,KAAKa,iBAEvB,EAEAN,EAAaE,UAAUJ,cAAgB,SAAU+B,GACzCA,GAAUpC,KAAKiB,YACfjB,KAAKiB,WAAWmB,OAAO,CACnBL,OAAQ/B,KAAK4C,wBACbZ,SAAUhC,KAAKa,eACfwB,YAAY,IAGV5C,EAAE,kCACH8C,QACL9C,EAAE,yCAAyC+C,OAAO,6GAEtDxC,KAAKiB,WAAWwB,MAAM,2BAC1B,EAEAlC,EAAaE,UAAUoC,aAAe,WAC7BpD,EAAEO,KAAK0C,WAAWH,QAAWvC,KAAKU,0BAGvCV,KAAKK,eAAc,GACnBL,KAAKmB,gBAAgB,iCAAkCnB,KAAK2C,mBAChE,EAE6C,oBAAlCG,8BACP,IAAIlD,EAAgBkD,+BACyB,oBAA/BC,4BACd,IAAIxC,EAAawC,2BAGxB,CAnID,CAmIGC,OAAQC,OAAOvD","sources":["webpack://simple-secure-stripe/./src/assets/js/frontend/afterpay.js"],"sourcesContent":["(function ($, sswps) {\n\n    function Utils() {\n    }\n\n    Utils.prototype.is_currency_supported = function () {\n        return this.params.currencies.indexOf(this.get_currency()) > -1;\n    }\n\n    /**\n     * Product page integration\n     * @constructor\n     */\n    function AfterpayProduct(params) {\n        sswps.BaseGateway.call(this, params);\n        sswps.ProductGateway.call(this);\n        $(document.body).on('change', '[name=\"quantity\"]', this.mount_message.bind(this, true));\n    }\n\n    AfterpayProduct.prototype = $.extend({}, sswps.BaseGateway.prototype, sswps.ProductGateway.prototype, Utils.prototype, sswps.Afterpay.prototype);\n\n    AfterpayProduct.prototype.initialize = function () {\n        if (!this.msgElement && this.is_currency_supported()) {\n            this.create_element();\n            this.mount_message();\n            this.add_eligibility('#sswps-afterpay-product-msg', this.get_product_price());\n        }\n    }\n\n    AfterpayProduct.prototype.get_product_price = function (cents) {\n        var qty = $('[name=\"quantity\"]').val();\n        if (!qty) {\n            qty = 0;\n        }\n        if (cents) {\n            return this.get_product_data().price_cents * parseInt(qty);\n        }\n        return this.get_product_data().price * parseInt(qty);\n    }\n\n    AfterpayProduct.prototype.create_element = function () {\n        this.msgElement = this.elements.create('afterpayClearpayMessage', $.extend({}, this.params.msg_options, {\n            amount: this.get_product_price(true),\n            currency: this.get_currency()\n        }));\n    }\n\n    AfterpayProduct.prototype.found_variation = function () {\n        sswps.ProductGateway.prototype.found_variation.apply(this, arguments);\n        this.mount_message(true);\n    }\n\n    AfterpayProduct.prototype.mount_message = function (update) {\n        if (this.msgElement) {\n            if (update) {\n                this.msgElement.update({\n                    amount: this.get_product_price(true),\n                    currency: this.get_currency(),\n                    isEligible: this.is_eligible(this.get_product_price())\n                })\n            }\n            var $el = $('#sswps-afterpay-product-msg');\n            if (!$el.length) {\n                if ($('.summary .price').length) {\n                    $('.summary .price').append('<div id=\"sswps-afterpay-product-msg\"></div>');\n                } else {\n                    if ($('.price').length) {\n                        $($('.price')[0]).append('<div id=\"sswps-afterpay-product-msg\"></div>');\n                    }\n                }\n            }\n            this.msgElement.mount('#sswps-afterpay-product-msg');\n        }\n\n    }\n\n    /**\n     * Cart page integration\n     * @constructor\n     */\n    function AfterpayCart(params) {\n        sswps.BaseGateway.call(this, params);\n        sswps.CartGateway.call(this);\n    }\n\n    AfterpayCart.prototype = $.extend({}, sswps.BaseGateway.prototype, sswps.CartGateway.prototype, Utils.prototype, sswps.Afterpay.prototype);\n\n    AfterpayCart.prototype.initialize = function () {\n        if (!this.msgElement && $(this.container).length && this.is_currency_supported()) {\n            this.create_element();\n            this.mount_message();\n            this.add_eligibility('#sswps-afterpay-cart-container', this.get_total_price());\n        }\n    }\n\n    AfterpayCart.prototype.create_element = function () {\n        this.msgElement = this.elements.create('afterpayClearpayMessage', $.extend({}, this.params.msg_options, {\n            amount: this.get_total_price_cents(),\n            currency: this.get_currency()\n        }));\n    }\n\n    AfterpayCart.prototype.mount_message = function (update) {\n        if (update && this.msgElement) {\n            this.msgElement.update({\n                amount: this.get_total_price_cents(),\n                currency: this.get_currency(),\n                isEligible: true\n            })\n        }\n        var $el = $('#sswps-afterpay-cart-container');\n        if (!$el.length) {\n            $('.cart_totals table.shop_table > tbody').append('<tr id=\"sswps-afterpay-cart-container\"><td colspan=\"2\"><div id=\"sswps-afterpay-cart-msg\"></div></td></tr>');\n        }\n        this.msgElement.mount('#sswps-afterpay-cart-msg');\n    }\n\n    AfterpayCart.prototype.updated_html = function () {\n        if (!$(this.container).length || !this.is_currency_supported()) {\n            return;\n        }\n        this.mount_message(true);\n        this.add_eligibility('#sswps-afterpay-cart-container', this.get_total_price());\n    }\n\n    if (typeof sswps_afterpay_product_params !== 'undefined') {\n        new AfterpayProduct(sswps_afterpay_product_params);\n    } else if (typeof sswps_afterpay_cart_params !== 'undefined') {\n        new AfterpayCart(sswps_afterpay_cart_params);\n    }\n\n})(jQuery, window.sswps);"],"names":["$","sswps","Utils","AfterpayProduct","params","BaseGateway","call","this","ProductGateway","document","body","on","mount_message","bind","AfterpayCart","CartGateway","prototype","is_currency_supported","currencies","indexOf","get_currency","extend","Afterpay","initialize","msgElement","create_element","add_eligibility","get_product_price","cents","qty","val","get_product_data","price_cents","parseInt","price","elements","create","msg_options","amount","currency","found_variation","apply","arguments","update","isEligible","is_eligible","length","append","mount","container","get_total_price","get_total_price_cents","updated_html","sswps_afterpay_product_params","sswps_afterpay_cart_params","jQuery","window"],"sourceRoot":""}