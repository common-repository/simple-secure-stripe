{"version":3,"file":"sswps-funnelkit-upsell.js","mappings":"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","sources":["webpack://simple-secure-stripe/webpack/bootstrap","webpack://simple-secure-stripe/webpack/runtime/compat get default export","webpack://simple-secure-stripe/webpack/runtime/define property getters","webpack://simple-secure-stripe/webpack/runtime/hasOwnProperty shorthand","webpack://simple-secure-stripe/./node_modules/.pnpm/@stripe+stripe-js@1.54.1/node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://simple-secure-stripe/external var \"jQuery\"","webpack://simple-secure-stripe/./src/assets/js/integrations/FunnelKit/upsell/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.54.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import {loadStripe} from '@stripe/stripe-js';\nimport $ from 'jquery';\n\nlet stripe;\n\nlet data = {};\n\nconst getStripeParams = () => {\n    if (getData('account')) {\n        return {stripeAccount: getData('account')};\n    }\n    return {};\n}\n\nconst initialize = () => {\n    $(document).on('wfocu_external', onHandleSubmit);\n    window.addEventListener('hashchange', handleHashChange);\n    wfocuCommons.addFilter('wfocu_front_charge_data', addChargeData);\n    loadStripe(getData('publishableKey'), getStripeParams()).then((client) => {\n        stripe = client;\n    }).catch(error => {\n        console.log(error);\n    });\n}\n\nconst onBucketCreated = (e, bucket) => {\n    data = window?.wfocu_vars?.stripeData;\n    setData('bucket', bucket);\n    initialize();\n}\n\nconst onHandleSubmit = (e, bucket) => {\n    setData('bucket', bucket);\n}\n\nconst handleHashChange = (e) => {\n    var match = e.newURL.match(/response=(.*)/);\n    if (match) {\n        const obj = JSON.parse(window.atob(decodeURIComponent(match[1])));\n        getData('bucket')?.swal?.hide();\n        setData('paymentIntent', obj.payment_intent);\n        history.pushState({}, '', window.location.pathname + window.location.search);\n        stripe.confirmCardPayment(obj.client_secret).then(response => {\n            if (response.error) {\n                // display message\n                resetPaymentProcess();\n            } else {\n                setData('paymentComplete', true);\n                getData('bucket').sendBucket();\n            }\n        }).catch(error => {\n            console.log(error);\n        });\n    }\n}\n\nconst addChargeData = (e) => {\n    e['_payment_intent'] = getData('paymentIntent');\n    return e;\n}\n\nconst getData = (key, defaultValue = null) => {\n    if (!data.hasOwnProperty(key)) {\n        data[key] = defaultValue;\n    }\n    return data[key];\n}\n\nconst setData = (key, value) => {\n    data[key] = value;\n}\n\nconst resetPaymentProcess = () => {\n    getData('bucket').inOfferTransaction = false;\n    getData('bucket').EnableButtonState();\n    getData('bucket').HasEventRunning = false;\n}\n\n$(document).on('wfocuBucketCreated', onBucketCreated);"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","stripePromise$1","then","loadCalled","err","jQuery","stripe","data","initialize","$","on","onHandleSubmit","handleHashChange","wfocuCommons","addFilter","addChargeData","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","loadStripe","getData","stripeAccount","client","log","e","bucket","setData","match","newURL","_getData","_getData$swal","JSON","parse","atob","decodeURIComponent","swal","hide","payment_intent","history","pushState","location","pathname","search","confirmCardPayment","client_secret","response","resetPaymentProcess","sendBucket","defaultValue","value","inOfferTransaction","EnableButtonState","HasEventRunning","_window","_window$wfocu_vars","wfocu_vars","stripeData"],"sourceRoot":""}