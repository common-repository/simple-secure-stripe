!function(t,a){function e(){a.BaseGateway.call(this,sswps_applepay_product_params),this.old_qty=this.get_quantity()}e.prototype=t.extend({},a.BaseGateway.prototype,a.ProductGateway.prototype,a.ApplePay.prototype),e.prototype.initialize=function(){t(".sswps_product_payment_methods "+this.container).length?(this.container=".sswps_product_payment_methods "+this.container,a.ProductGateway.call(this),a.ApplePay.prototype.initialize.call(this)):setTimeout(this.initialize.bind(this),1e3)},e.prototype.canMakePayment=function(){a.ApplePay.prototype.canMakePayment.call(this).then(function(){t(document.body).on("change",'[name="quantity"]',this.maybe_calculate_cart.bind(this)),t(this.container).parent().parent().addClass("active"),this.is_variable_product()?this.variable_product_selected()?this.cart_calculation(this.get_product_data().variation.variation_id):this.disable_payment_button():this.cart_calculation()}.bind(this))},e.prototype.cart_calculation=function(){return a.ProductGateway.prototype.cart_calculation.apply(this,arguments).then(function(t){this.update_from_cart_calculation(t)}.bind(this))},e.prototype.start=function(t){0===this.get_quantity()?(t.preventDefault(),this.submit_error(this.params.messages.invalid_amount)):(this.needs_shipping()||this.add_to_cart(),a.ApplePay.prototype.start.apply(this,arguments))},e.prototype.append_button=function(){var a=document.querySelectorAll(".sswps-applepay-container");a&&a.length>1?(t.each(a,function(a,e){t(e).empty(),t(e).append(this.$button.clone(!0))}.bind(this)),this.$button=t(".sswps-applepay-container").find("button")):t("#sswps-applepay-container").append(this.$button)},e.prototype.maybe_calculate_cart=function(){this.disable_payment_button(),this.old_qty=this.get_quantity(),this.is_variable_product()&&!this.variable_product_selected()||this.cart_calculation().then(function(){this.is_variable_product()?(this.createPaymentRequest(),a.ApplePay.prototype.canMakePayment.apply(this,arguments).then(function(){this.enable_payment_button()}.bind(this))):this.enable_payment_button()}.bind(this))},e.prototype.found_variation=function(t){a.ProductGateway.prototype.found_variation.apply(this,arguments),this.can_pay&&this.maybe_calculate_cart()},new e}(jQuery,sswps);
//# sourceMappingURL=applepay-product.js.map