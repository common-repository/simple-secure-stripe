{"version":3,"file":"local-payment.js","mappings":"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","sources":["webpack://simple-secure-stripe/./src/assets/js/frontend/local-payment.js"],"sourcesContent":["(function ($, sswps) {\n\n    /**\n     * [LocalPayment description]\n     */\n    function LocalPayment(params) {\n        sswps.BaseGateway.call(this, params);\n        sswps.CheckoutGateway.call(this);\n\n        $(document.body).on('click', '#place_order', this.place_order.bind(this));\n\n        if (this.is_current_page('order_pay')) {\n            $('#order_review').on('submit', this.process_order_pay.bind(this));\n        }\n\n        this.maybe_hide_gateway();\n    }\n\n    LocalPayment.prototype = $.extend({}, sswps.BaseGateway.prototype, sswps.CheckoutGateway.prototype);\n\n\n    LocalPayment.prototype.initialize = function () {\n        this.mount_button();\n    }\n\n    LocalPayment.prototype.elementType = null;\n\n    LocalPayment.prototype.is_active = function () {\n        return $('#sswps_local_payment_' + this.gateway_id).data('active');\n    }\n\n    LocalPayment.prototype.maybe_hide_gateway = function () {\n        if (!this.is_active()) {\n            $(this.container).hide();\n            if (this.is_gateway_selected()) {\n                $('li[class*=\"payment_method_sswps_\"]').filter(':visible').eq(0).find('[name=\"payment_method\"]').prop('checked', true).trigger('click');\n            }\n        } else {\n            $(this.container).show();\n        }\n    }\n\n    /**\n     * [createSource description]\n     * @return {[type]} [description]\n     */\n    LocalPayment.prototype.createSource = function () {\n        return new Promise(function (resolve, reject) {\n            var handler = function (result) {\n                if (result.error) {\n                    this.submit_error(result.error);\n                } else {\n                    this.payment_token_received = true;\n                    this.set_nonce(result.source.id);\n                    this.get_form().trigger('submit');\n                }\n                resolve();\n            }.bind(this);\n            if (this.elementType != null) {\n                if (this.confirmation_method) {\n                    if (this.confirmation_obj) {\n                        this.processConfirmation(this.confirmation_obj);\n                    } else {\n                        if (this.isValidElement()) {\n                            this.payment_token_received = true;\n                            this.get_form().trigger('submit');\n                        } else {\n                            return this.submit_error({\n                                code: 'empty_element_' + this.params.local_payment_type,\n                                message: sswps_messages.empty_element\n                            });\n                        }\n                    }\n                } else {\n                    this.stripe.createSource(this.element, this.getSourceArgs()).then(handler).catch(function (e) {\n                        this.submit_error(e.message);\n                    }.bind(this))\n                }\n            } else {\n                this.payment_token_received = true;\n                this.get_form().trigger('submit');\n            }\n        }.bind(this));\n    }\n\n    LocalPayment.prototype.place_order = function (e) {\n        if (this.is_gateway_selected()) {\n            if (!this.payment_token_received && !this.is_saved_method_selected()) {\n                e.preventDefault();\n                if (this.is_change_payment_method()) {\n                    this.process_setup_intent();\n                } else {\n                    this.createSource();\n                }\n            }\n        }\n    }\n\n    LocalPayment.prototype.process_setup_intent = function () {\n        // create the setup intent\n        this.block();\n        this.create_setup_intent().then(function () {\n            this.stripe[this.setupActionMethod](this.client_secret, this.get_confirmation_args()).then(function (result) {\n                if (result.error) {\n                    return this.submit_error(result.error.message);\n                }\n                this.set_nonce(result.setupIntent.payment_method);\n                this.set_intent(result.setupIntent.id);\n                this.payment_token_received = true;\n                this.get_form().trigger('submit');\n            }.bind(this));\n        }.bind(this)).catch(function (error) {\n            this.submit_error(error);\n        }.bind(this)).finally(function () {\n            this.unblock();\n        }.bind(this))\n    }\n\n    LocalPayment.prototype.checkout_place_order = function (e) {\n        if (!this.is_saved_method_selected() && !this.payment_token_received) {\n            this.place_order.apply(this, arguments);\n            return false;\n        }\n        return sswps.CheckoutGateway.prototype.checkout_place_order.apply(this, arguments);\n    }\n\n    LocalPayment.prototype.process_order_pay = function (e) {\n        if (this.is_gateway_selected()) {\n            e.preventDefault();\n            sswps.CheckoutGateway.prototype.process_order_pay.apply(this, arguments);\n        }\n    }\n\n    LocalPayment.prototype.show_payment_button = function () {\n        this.show_place_order();\n    }\n\n    /**\n     * [Leave empty so that the place order button is not hidden]\n     * @return {[type]} [description]\n     */\n    LocalPayment.prototype.hide_place_order = function () {\n\n    }\n\n    LocalPayment.prototype.show_place_order = function () {\n        sswps.CheckoutGateway.prototype.show_place_order.apply(this, arguments);\n        if (this.payment_token_received) {\n            $('#place_order').text($('#place_order').data('value'));\n        }\n    }\n\n    LocalPayment.prototype.getSourceArgs = function () {\n        return {\n            type: this.params.local_payment_type,\n            amount: this.get_total_price_cents(),\n            currency: this.get_currency(),\n            owner: {\n                name: this.get_customer_name(this.get_billing_prefix()),\n                email: this.fields.get('billing_email', null)\n            },\n            redirect: {\n                return_url: this.params.return_url\n            }\n        }\n    }\n\n    LocalPayment.prototype.updated_checkout = function () {\n        this.mount_button();\n        this.maybe_hide_gateway();\n    }\n\n    LocalPayment.prototype.mount_button = function () {\n        var id = '#sswps_local_payment_' + this.gateway_id;\n        if ($(id).length && this.elementType != null) {\n            $(id).empty();\n            if (!this.element) {\n                this.element = this.elements.create(this.elementType, this.params.element_params);\n                this.element.on('change', this.handleElementChange.bind(this));\n            }\n            this.elementEmpty = true;\n            this.element.mount(id);\n        }\n\n    }\n\n    LocalPayment.prototype.handleElementChange = function (e) {\n        this.elementEmpty = e.empty;\n    }\n\n    LocalPayment.prototype.load_external_script = function (url) {\n        var script = document.createElement('script');\n        script.type = \"text/javascript\";\n        script.src = url;\n        script.onload = function () {\n            this.script_loaded = true;\n        }.bind(this);\n        document.body.appendChild(script);\n    }\n\n    LocalPayment.prototype.hashChange = function (e) {\n        if (this.is_gateway_selected()) {\n            var match = window.location.hash.match(/response=(.*)/);\n            if (match) {\n                history.pushState({}, '', window.location.pathname);\n                var obj = JSON.parse(window.atob(decodeURIComponent(match[1])));\n                this.processConfirmation(obj);\n            }\n        }\n    }\n\n    LocalPayment.prototype.handle_next_action = function (data) {\n        this.processConfirmation(data);\n    }\n\n    LocalPayment.prototype.processConfirmation = function (obj) {\n        if (obj.type === 'payment_intent') {\n            this.stripe[this.confirmation_method](obj.client_secret, this.get_confirmation_args(obj)).then(function (result) {\n                if (result.error) {\n                    this.after_confirmation_error(result, obj);\n                    this.confirmation_obj = obj;\n                    this.payment_token_received = false;\n                    return this.submit_error(result.error);\n                }\n                var redirect = decodeURI(obj.order_received_url);\n                if (result.paymentIntent.status === 'processing') {\n                    redirect += '&' + $.param({\n                        '_stripe_local_payment': this.gateway_id,\n                        payment_intent: result.paymentIntent.id,\n                        payment_intent_client_secret: result.paymentIntent.client_secret\n                    });\n                }\n                window.location.href = decodeURI(redirect);\n            }.bind(this))\n        } else {\n            this.stripe[this.setupActionMethod](obj.client_secret, this.get_confirmation_args(obj)).then(function (result) {\n                if (result.error) {\n                    return this.submit_error(result.error.message);\n                }\n                this.set_nonce(result.setupIntent.payment_method);\n                this.set_intent(result.setupIntent.id);\n                return this.process_payment(obj.order_id, obj.order_key);\n            }.bind(this));\n        }\n    }\n\n    LocalPayment.prototype.after_confirmation_error = function (result, obj) {\n\n    }\n\n    LocalPayment.prototype.get_confirmation_args = function (obj) {\n        obj = typeof obj === 'undefined' ? {} : obj;\n        var args = {\n            payment_method: {\n                billing_details: this.get_billing_details()\n            },\n            return_url: obj.return_url\n        };\n        if (this.elementType) {\n            args.payment_method[this.params.local_payment_type] = this.element;\n        }\n        return args;\n    }\n\n    LocalPayment.prototype.isValidElement = function () {\n        if (this.element) {\n            return !this.elementEmpty;\n        }\n        return true;\n    }\n\n    LocalPayment.prototype.delete_order_source = function () {\n        return new Promise(function (resolve, reject) {\n            $.ajax({\n                url: this.params.routes.delete_order_source,\n                method: 'DELETE',\n                dataType: 'json',\n                beforeSend: this.ajax_before_send.bind(this)\n            }).done(function (response) {\n                resolve(response);\n            }.bind(this)).fail(function () {\n                reject();\n            }.bind(this))\n        }.bind(this))\n    }\n\n    LocalPayment.prototype.update_source = function (args) {\n        return new Promise(function (resolve, reject) {\n            if (this.updateSourceXhr) {\n                this.updateSourceXhr.abort();\n            }\n            this.updateSourceXhr = $.ajax({\n                url: this.params.routes.update_source,\n                method: 'POST',\n                dataType: 'json',\n                data: {\n                    _wpnonce: this.params.rest_nonce,\n                    updates: args,\n                    source_id: this.source.id,\n                    client_secret: this.source.client_secret,\n                    payment_method: this.gateway_id\n                }\n            }).done(function (response) {\n                resolve(response.source);\n            }.bind(this)).fail(function () {\n                reject();\n            });\n        }.bind(this));\n    }\n\n    /*********** iDEAL ***********/\n    function IDEAL(params) {\n        this.elementType = 'idealBank';\n        this.confirmation_method = 'confirmIdealPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    /*********** P24 ***********/\n    function P24(params) {\n        this.elementType = 'p24Bank';\n        this.confirmation_method = 'confirmP24Payment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    /******* Sepa *******/\n    function Sepa(params) {\n        this.elementType = 'iban';\n        this.confirmation_method = 'confirmSepaDebitPayment';\n        this.setupActionMethod = 'confirmSepaDebitSetup';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n\t\t\t$(document.body).on('change', '#createaccount', this.handle_create_account_change.bind(this));\n    }\n\n    /****** Klarna ******/\n    function Klarna(params) {\n        this.confirmation_method = 'confirmKlarnaPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function FPX(params) {\n        this.elementType = 'fpxBank';\n        this.confirmation_method = 'confirmFpxPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function WeChat(params) {\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function BECS(params) {\n        this.elementType = 'auBankAccount';\n        this.confirmation_method = 'confirmAuBecsDebitPayment';\n        this.setupActionMethod = 'confirmAuBecsDebitSetup';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function GrabPay(params) {\n        this.confirmation_method = 'confirmGrabPayPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Afterpay(params) {\n        this.confirmation_method = 'confirmAfterpayClearpayPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Boleto(params) {\n        this.confirmation_method = 'confirmBoletoPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function OXXO(params) {\n        this.confirmation_method = 'confirmOxxoPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function GiroPay(params) {\n        this.confirmation_method = 'confirmGiropayPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Bancontact(params) {\n        this.confirmation_method = 'confirmBancontactPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function EPS(params) {\n        this.elementType = 'epsBank';\n        this.confirmation_method = 'confirmEpsPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Alipay(params) {\n        this.confirmation_method = 'confirmAlipayPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Sofort(params) {\n        this.confirmation_method = 'confirmSofortPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function Affirm(params) {\n        this.confirmation_method = 'confirmAffirmPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function BLIK(params) {\n        this.confirmation_method = 'confirmBlikPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n        $(document.body).on('keydown', '[name^=\"blik_code_\"]', this.handle_keydown.bind(this));\n        $(document.body).on('input', '[name^=\"blik_code_\"]', this.handle_input.bind(this));\n    }\n\n    function Konbini(params) {\n        this.confirmation_method = 'confirmKonbiniPayment';\n        this.generateConfirmationNumber = false;\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    function PayNow(params) {\n        this.confirmation_method = 'confirmPayNowPayment';\n        LocalPayment.call(this, params);\n        window.addEventListener('hashchange', this.hashChange.bind(this));\n    }\n\n    WeChat.prototype.updated_checkout = function () {\n        if (!this.script_loaded && $(this.container).length) {\n            this.load_external_script(this.params.qr_script);\n        }\n        LocalPayment.prototype.updated_checkout.apply(this, arguments);\n    }\n\n    WeChat.prototype.hashChange = function (e) {\n        if (this.is_gateway_selected()) {\n            var match = window.location.hash.match(/qrcode=(.*)/);\n            if (match) {\n                history.pushState({}, '', window.location.pathname);\n                this.qrcode = JSON.parse(window.atob(decodeURIComponent(match[1])));\n                this.get_form().unblock().removeClass('processing').addClass('wechat');\n                var qrCode = new QRCode('sswps_local_payment_sswps_wechat', {\n                    text: this.qrcode.code,\n                    width: parseInt(this.params.qr_size),\n                    height: parseInt(this.params.qr_size),\n                    colorDark: '#424770',\n                    colorLight: '#f8fbfd',\n                    correctLevel: QRCode.CorrectLevel.H,\n                });\n                $('#sswps_local_payment_sswps_wechat').append('<p class=\"qrcode-message\">' + this.params.qr_message + '</p>');\n                this.payment_token_received = true;\n                this.show_place_order();\n            }\n        }\n    }\n\n    WeChat.prototype.place_order = function (e) {\n        if (this.qrcode && this.payment_token_received) {\n            e.preventDefault();\n            window.location = this.qrcode.redirect;\n        } else {\n            LocalPayment.prototype.place_order.apply(this, arguments);\n        }\n    }\n\n    Afterpay.prototype.is_currency_supported = function () {\n        return this.params.currencies.indexOf(this.get_currency()) > -1;\n    }\n\n    Afterpay.prototype.updated_checkout = function () {\n        this.maybe_hide_gateway();\n        if (this.has_gateway_data() && this.is_currency_supported()) {\n            this.add_eligibility(this.container, parseFloat(this.get_total_price()));\n            // re-insert the messaging\n            // create new elements object since country code could have changed\n            this.elements = this.stripe.elements(this.get_element_options());\n            this.initialize_messaging();\n        }\n    }\n\n    Afterpay.prototype.initialize = function () {\n        if (this.has_gateway_data() && this.is_currency_supported()) {\n            this.add_eligibility(this.container, parseFloat(this.get_total_price()));\n            this.initialize_messaging();\n        }\n    }\n\n    Afterpay.prototype.initialize_messaging = function () {\n        this.msgElement = this.elements.create('afterpayClearpayMessage', $.extend({}, this.params.msg_options, {\n            amount: this.get_total_price_cents(),\n            currency: this.get_currency()\n        }));\n        this.mount_message();\n    }\n\n    Afterpay.prototype.mount_message = function (update) {\n        if (update) {\n            this.msgElement.update({\n                amount: this.get_total_price_cents(),\n                currency: this.get_currency()\n            });\n        }\n        var $el = $('label[for=\"payment_method_sswps_afterpay\"]').find('#sswps-afterpay-msg');\n        if (!$el.length) {\n            $('label[for=\"payment_method_sswps_afterpay\"]').append('<div id=\"sswps-afterpay-msg\"></div>');\n        }\n        this.msgElement.mount('#sswps-afterpay-msg');\n    }\n\n    Afterpay.prototype.add_eligibility = function (selector, price) {\n        sswps.Afterpay.prototype.add_eligibility.apply(this, arguments);\n        if (!this.is_eligible(price)) {\n            $(this.container).find('.sswps-afterpay__offsite').addClass('afterpay-ineligible');\n        }\n    }\n\n    Boleto.prototype.get_confirmation_args = function (obj) {\n        var args = LocalPayment.prototype.get_confirmation_args.call(this, obj);\n        args.payment_method.boleto = {\n            tax_id: this.get_tax_id()\n        };\n        return args;\n    }\n\n    Boleto.prototype.createSource = function () {\n        var tax_id = this.get_tax_id();\n        if (!tax_id || !tax_id.match(/^(\\w{3}\\.){2}\\w{3}-\\w{2}$|^(\\w{11}|\\w{14})$|^\\w{2}\\.\\w{3}\\.\\w{3}\\/\\w{4}-\\w{2}$/)) {\n            return this.submit_error({code: 'incomplete_boleto_tax_id'});\n        } else {\n            this.payment_token_received = true;\n            this.get_form().trigger('submit');\n        }\n    }\n\n    Boleto.prototype.get_tax_id = function () {\n        return $('#sswps_boleto_tax_id').val();\n    }\n\n    Sepa.prototype.updated_checkout = function (e) {\n        LocalPayment.prototype.updated_checkout.apply(this, arguments);\n        var val = $('[name=\"billing_country\"]').val();\n        if (!!val && this.element) {\n            this.element.update({placeholderCountry: val});\n        }\n    }\n\n    Sofort.prototype.get_confirmation_args = function () {\n        var args = LocalPayment.prototype.get_confirmation_args.apply(this, arguments);\n        args.payment_method.sofort = {country: args.payment_method.billing_details.address.country};\n        return args;\n    }\n\n    BLIK.prototype.get_confirmation_args = function () {\n        this.render_timer();\n        var args = LocalPayment.prototype.get_confirmation_args.apply(this, arguments);\n        args.payment_method.blik = {};\n        args.payment_method_options = {\n            blik: {\n                code: this.get_blik_code()\n            }\n        }\n        return args;\n    }\n\n    BLIK.prototype.get_blik_code = function () {\n        var result = document.querySelectorAll('[name^=\"blik_code_\"]');\n        var code = '';\n        if (result && result.length) {\n            $.each(result, function (idx, node) {\n                code += $(node).val();\n            });\n        }\n        return code;\n    }\n\n    BLIK.prototype.handle_keydown = function (e) {\n        this.keyCode = e.keyCode;\n        var value = $(e.currentTarget).val();\n        if (this.keyCode === 8) {\n            if (!value) {\n                this.handle_input(e, true);\n            }\n        } else if (value) {\n            this.handle_input(e, true);\n        }\n    }\n\n    BLIK.prototype.handle_input = function (e, skip) {\n        var idx = $(e.currentTarget).data('blik_index');\n        idx = parseInt(idx);\n        var next = 6;\n        if (this.keyCode === 8) {\n            if (idx > 0 && skip) {\n                next = idx - 1;\n            }\n        } else if (idx < 5) {\n            next = idx + 1;\n        }\n        if (next < 6) {\n            $('#blik_code_' + next).focus();\n        }\n        this.keyCode = skip ? this.keyCode : null;\n    }\n\n    BLIK.prototype.render_timer = function (result, obj, redirect) {\n        var end = Date.now() + 60 * 1000;\n        var count = 60;\n        $('.blik-timer-container').show().find('#blik_timer').text(count + 's');\n        $('.sswps-blik-code-container').hide();\n        this.timer_id = setInterval(function () {\n            if (Date.now() > end || count === 0) {\n                clearInterval(this.timer_id);\n                $('.blik-timer-container').hide();\n                $('.sswps-blik-code-container').show();\n                return;\n            }\n            count += -1;\n            $('#blik_timer').text(count + 's');\n        }.bind(this), 1000);\n    }\n\n    BLIK.prototype.after_confirmation_error = function () {\n        clearInterval(this.timer_id);\n        $('.blik-timer-container').hide();\n        $('.sswps-blik-code-container').show();\n    }\n\n    Konbini.prototype.get_confirmation_args = function (obj) {\n        var args = LocalPayment.prototype.get_confirmation_args.apply(this, arguments);\n        args.payment_method_options = {\n            konbini: {\n                confirmation_number: this.generateConfirmationNumber ? obj.confirmation_number : obj.billing_phone\n            }\n        }\n        return args;\n    }\n\n    Konbini.prototype.after_confirmation_error = function (result) {\n        if (result.error && result.error.hasOwnProperty('code')) {\n            if (result.error.code === 'payment_intent_konbini_rejected_confirmation_number') {\n                this.generateConfirmationNumber = true;\n            }\n        }\n    }\n\n    PayNow.prototype.processConfirmation = function (obj) {\n        if (obj.type === 'payment_intent') {\n            this.stripe[this.confirmation_method](obj.client_secret, this.get_confirmation_args(obj)).then(function (result) {\n                if (result.error) {\n                    $('form.checkout').removeClass('processing');\n                    return this.submit_error(result.error);\n                }\n                if (result.paymentIntent.status === 'requires_action') {\n                    return this.unblock();\n                } else if (result.paymentIntent.status === 'requires_payment_method') {\n                    this.unblock();\n                    return this.submit_error({code: result.paymentIntent.last_payment_error.code});\n                }\n                window.location.href = decodeURI(obj.order_received_url);\n            }.bind(this))\n        } else {\n            LocalPayment.prototype.processConfirmation.apply(this, arguments);\n        }\n    }\n\n    IDEAL.prototype = $.extend({}, LocalPayment.prototype, IDEAL.prototype);\n\n    P24.prototype = $.extend({}, LocalPayment.prototype, P24.prototype);\n\n    Sepa.prototype = $.extend({}, LocalPayment.prototype, Sepa.prototype);\n\n    Klarna.prototype = $.extend({}, LocalPayment.prototype, Klarna.prototype);\n\n    FPX.prototype = $.extend({}, LocalPayment.prototype, FPX.prototype);\n\n    WeChat.prototype = $.extend({}, LocalPayment.prototype, WeChat.prototype);\n\n    BECS.prototype = $.extend({}, LocalPayment.prototype, BECS.prototype);\n\n    GrabPay.prototype = $.extend({}, LocalPayment.prototype, GrabPay.prototype);\n\n    Afterpay.prototype = $.extend({}, LocalPayment.prototype, sswps.Afterpay.prototype, Afterpay.prototype);\n\n    Boleto.prototype = $.extend({}, LocalPayment.prototype, Boleto.prototype);\n\n    OXXO.prototype = $.extend({}, LocalPayment.prototype, OXXO.prototype);\n\n    GiroPay.prototype = $.extend({}, LocalPayment.prototype, GiroPay.prototype);\n\n    Bancontact.prototype = $.extend({}, LocalPayment.prototype, Bancontact.prototype);\n\n    EPS.prototype = $.extend({}, LocalPayment.prototype, EPS.prototype);\n\n    Alipay.prototype = $.extend({}, LocalPayment.prototype, Alipay.prototype);\n\n    Sofort.prototype = $.extend({}, LocalPayment.prototype, Sofort.prototype);\n\n    Affirm.prototype = $.extend({}, LocalPayment.prototype, Affirm.prototype);\n\n    BLIK.prototype = $.extend({}, LocalPayment.prototype, BLIK.prototype);\n\n    Konbini.prototype = $.extend({}, LocalPayment.prototype, Konbini.prototype);\n\n    PayNow.prototype = $.extend({}, LocalPayment.prototype, PayNow.prototype);\n\n    /**\n     * Local payment types that require JS integration\n     * @type {Object}\n     */\n    var types = {\n        'ideal': IDEAL,\n        'p24': P24,\n        'sepa_debit': Sepa,\n        'klarna': Klarna,\n        'fpx': FPX,\n        'wechat': WeChat,\n        'au_becs_debit': BECS,\n        'grabpay': GrabPay,\n        'afterpay_clearpay': Afterpay,\n        'boleto': Boleto,\n        'oxxo': OXXO,\n        'giropay': GiroPay,\n        'bancontact': Bancontact,\n        'eps': EPS,\n        'alipay': Alipay,\n        'sofort': Sofort,\n        'affirm': Affirm,\n        'blik': BLIK,\n        'konbini': Konbini,\n        'paynow': PayNow\n    }\n\n    for (var i in sswps_local_payment_params.gateways) {\n        var params = sswps_local_payment_params.gateways[i];\n        if (types[params.local_payment_type]) {\n            new types[params.local_payment_type](params);\n        } else {\n            new LocalPayment(params);\n        }\n    }\n\n}(jQuery, window.sswps))"],"names":["$","sswps","LocalPayment","params","BaseGateway","call","this","CheckoutGateway","document","body","on","place_order","bind","is_current_page","process_order_pay","maybe_hide_gateway","IDEAL","elementType","confirmation_method","window","addEventListener","hashChange","P24","Sepa","setupActionMethod","handle_create_account_change","Klarna","FPX","WeChat","BECS","GrabPay","Afterpay","Boleto","OXXO","GiroPay","Bancontact","EPS","Alipay","Sofort","Affirm","BLIK","handle_keydown","handle_input","Konbini","generateConfirmationNumber","PayNow","prototype","extend","initialize","mount_button","is_active","gateway_id","data","container","show","hide","is_gateway_selected","filter","eq","find","prop","trigger","createSource","Promise","resolve","reject","handler","result","error","submit_error","payment_token_received","set_nonce","source","id","get_form","confirmation_obj","processConfirmation","isValidElement","code","local_payment_type","message","sswps_messages","empty_element","stripe","element","getSourceArgs","then","e","is_saved_method_selected","preventDefault","is_change_payment_method","process_setup_intent","block","create_setup_intent","client_secret","get_confirmation_args","setupIntent","payment_method","set_intent","unblock","checkout_place_order","apply","arguments","show_payment_button","show_place_order","hide_place_order","text","type","amount","get_total_price_cents","currency","get_currency","owner","name","get_customer_name","get_billing_prefix","email","fields","get","redirect","return_url","updated_checkout","length","empty","elements","create","element_params","handleElementChange","elementEmpty","mount","load_external_script","url","script","createElement","src","onload","script_loaded","appendChild","match","location","hash","history","pushState","pathname","obj","JSON","parse","atob","decodeURIComponent","handle_next_action","after_confirmation_error","decodeURI","order_received_url","paymentIntent","status","param","payment_intent","payment_intent_client_secret","href","process_payment","order_id","order_key","args","billing_details","get_billing_details","delete_order_source","ajax","routes","method","dataType","beforeSend","ajax_before_send","done","response","fail","update_source","updateSourceXhr","abort","_wpnonce","rest_nonce","updates","source_id","qr_script","qrcode","removeClass","addClass","QRCode","width","parseInt","qr_size","height","colorDark","colorLight","correctLevel","CorrectLevel","H","append","qr_message","is_currency_supported","currencies","indexOf","has_gateway_data","add_eligibility","parseFloat","get_total_price","get_element_options","initialize_messaging","msgElement","msg_options","mount_message","update","selector","price","is_eligible","boleto","tax_id","get_tax_id","val","placeholderCountry","sofort","country","address","render_timer","blik","payment_method_options","get_blik_code","querySelectorAll","each","idx","node","keyCode","value","currentTarget","skip","next","focus","end","Date","now","count","timer_id","setInterval","clearInterval","konbini","confirmation_number","billing_phone","hasOwnProperty","last_payment_error","types","i","sswps_local_payment_params","gateways","jQuery"],"sourceRoot":""}