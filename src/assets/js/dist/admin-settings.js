jQuery((function(e){function t(){this.params=sswps_setting_params,this.prefix="#"+e("#sswps_prefix").val(),this.init()}t.prototype.init=function(){e('[name^="woocommerce_sswps"]').on("change",this.display_children.bind(this)),e("select.stripe-accepted-cards").on("select2:select",this.reorder_multiselect),e(".api-register-domain").on("click",this.register_domain.bind(this)),e(".sswps-create-webhook").on("click",this.manage_webhook.bind(this)),e(".sswp-button--connection-test").on("click",this.do_connection_test.bind(this)),e(".stripe-delete-connection").on("click",this.do_delete_connection.bind(this)),"undefined"!=typeof sswps_admin_notices&&this.display_notices(),this.display_children(),window.location.search.match(/_stripe_connect_nonce/)&&history.pushState({},"",window.location.pathname+"?page=wc-settings&tab=checkout&section=sswps_api")},t.prototype.display_children=function(t){e("[data-show-if]").each(function(t,o){var s=e(o),n=s.data("show-if"),i=[];e.each(n,function(t,o){var n=e(this.prefix+t);-1==i.indexOf(s.attr("id"))?n.is(":checkbox")?n.is(":checked")==o?s.closest("tr").show():(s.closest("tr").hide(),i.push(s.attr("id"))):n.val()==o?s.closest("tr").show():(s.closest("tr").hide(),i.push(s.attr("id"))):(s.closest("tr").hide(),i.push(s.attr("id")))}.bind(this))}.bind(this)),e("[data-hide-if-no-value]").each(function(t,o){var s=e(o),n=s.data("hide-if-no-value");e.each(n,function(t,o){var n=e(this.prefix+t);n.is(":checkbox")?n.is(":checked")||s.closest("tr").hide():void 0!==n.val()&&""!=n.val()||s.closest("tr").hide()}.bind(this))}.bind(this))},t.prototype.reorder_multiselect=function(t){var o=t.params.data.element,s=e(o);s.detach(),e(this).append(s),e(this).trigger("change")},t.prototype.register_domain=function(t){t.preventDefault(),this.block(),e.ajax({url:this.params.routes.apple_domain,dataType:"json",method:"POST",data:{_wpnonce:this.params.rest_nonce,hostname:window.location.hostname}}).done(function(e){this.unblock(),e.code,window.alert(e.message)}.bind(this)).fail(function(e,t,o){this.unblock(),window.alert(o)}.bind(this))},t.prototype.manage_webhook=function(t){t.preventDefault(),e(t.currentTarget).is(".sswps-delete-webhook")?this.delete_webhook():this.create_webhook()},t.prototype.create_webhook=function(){this.block();var t=e("#woocommerce_sswps_api_mode").val();e.ajax({url:this.params.routes.create_webhook,dataType:"json",method:"POST",data:{_wpnonce:this.params.rest_nonce,environment:t}}).done(function(t){this.unblock(),t.code?window.alert(t.message):(e("#woocommerce_sswps_api_webhook_secret").val(t.secret),window.alert(t.message),window.location.reload())}.bind(this)).fail(function(e,t,o){this.unblock(),window.alert(o)}.bind(this))},t.prototype.delete_webhook=function(){this.block();var t=e("#woocommerce_sswps_api_mode").val();e.ajax({url:this.params.routes.delete_webhook,dataType:"json",method:"POST",data:{_wpnonce:this.params.rest_nonce,mode:t}}).done(function(t){this.unblock(),t.code?window.alert(t.message):(e("#woocommerce_sswps_api_webhook_secret").val(""),window.location.reload())}.bind(this)).fail(function(e,t,o){this.unblock(),window.alert(o)}.bind(this))},t.prototype.do_connection_test=function(t){t.preventDefault(),this.block();var o=e("#woocommerce_sswps_api_mode").val();e.ajax({url:this.params.routes.connection_test,dataType:"json",method:"POST",data:function(){var t={_wpnonce:this.params.rest_nonce,mode:o};return"test"===o&&(t.secret_key=e("#woocommerce_sswps_api_secret_key_test").val(),t.publishable_key=e("#woocommerce_sswps_api_publishable_key_test").val()),t}.bind(this)()}).done(function(e){this.unblock(),e.code,window.alert(e.message)}.bind(this)).fail(function(e,t,o){this.unblock(),window.alert(o)}.bind(this))},t.prototype.display_notices=function(){e.each(sswps_admin_notices,function(t,o){e(".woo-nav-tab-wrapper").after(o)}.bind(this))},t.prototype.block=function(){e(".sswps-settings-container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},t.prototype.unblock=function(){e(".sswps-settings-container").unblock()},t.prototype.do_delete_connection=function(t){t.preventDefault(),confirm(this.params.messages.delete_connection)&&(this.block(),e.ajax({method:"POST",url:this.params.routes.delete_connection,dataType:"json",data:{_wpnonce:this.params.rest_nonce}}).done(function(e){this.unblock(),e.code?window.alert(e.message):window.location.reload()}.bind(this)).fail(function(){this.unblock()}.bind(this)))},new t}));
//# sourceMappingURL=admin-settings.js.map